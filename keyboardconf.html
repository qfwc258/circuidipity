<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
        <title>Circuidipity | Detect and configure keyboards</title>
        <meta http-equiv="content-type" content="text/html"; charset="utf-8" />
        <meta http-equiv="pragma" content="no-cache" />
        <meta name="author" content="Daniel Wayne Armstrong" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/main.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/pygment.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/font.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/images/icons/font-awesome/css/font-awesome.min.css">
        <link rel="icon" href="http://www.circuidipity.com/theme/images/favicon.ico" type="image/x-icon" />
</head>

<body>
        <!-- content -->

<!-- breadcrumb trail -->
<div id="breadcrumb">
    <p><a href="/"><img class="minime" src="/theme/images/minime.png" alt="Mini Me" height="38" width="38" /> Howdy!</a> &nbsp;<i class="fa fa-arrow-right"></i>&nbsp;
    Tuesday 27 June 2017</p>
</div>

<!-- article -->
<h1>Detect and configure keyboards</h1>
<div id="article">
    <p>I have two keyboards I am interested in modifying with custom hotkey actions (via <a class="reference external" href="http://www.circuidipity.com/xbindkeysrc.html">xbindkeys</a>) and remapping keys (via <a class="reference external" href="http://www.circuidipity.com/xmodmap.html">xmodmap</a>). So for my <a class="reference external" href="http://www.circuidipity.com/jessiebook-to-stretchbook.html">Stretchbook's</a> keyboard I created <a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.chromebook">.xbindkeysrc.chromebook</a> and <a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.chromebook">.xmodmap.chromebook</a>, my <a class="reference external" href="http://www.circuidipity.com/thinkpad-usb-keyboard-trackpoint.html">Thinkpad USB Keyboard + Trackpoint</a> uses <a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.thinkpad_usb">.xbindkeysrc.thinkpad_usb</a> and <a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.thinkpad_usb">.xmodmap.thinkpad_usb</a>, and I would create <tt class="docutils literal"><span class="pre">~/.xbindkeysrc</span></tt> and <tt class="docutils literal"><span class="pre">~/.xmodmap</span></tt> symlinks to the relevant config for the keyboard in use.</p>
<p>Now that Stretchbook is my primary machine, I may be using either keyboard on the same machine depending on location: the built-in keyboard when away; connecting to the USB keyboard and external display when at home. Old method of symlinking won't work if I am switching which keyboard I use.</p>
<p><strong>[ FIX! ]</strong> I created the <a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/keyboardconf">keyboardconf</a> shell script to detect attached keyboards and load appropriate modifications. Priority is assigned to the external Thinkpad keyboard and, failing to detect that device, the program falls back to setting up the built-in keyboard. Scripting this detection makes it easy for me to add more keyboard types in the future!</p>
<p>Program is in my <a class="reference external" href="http://www.circuidipity.com/homebin.html">~/bin</a> and I add the command to <a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xinitrc">~/.xinitrc</a> to run at <tt class="docutils literal">startx</tt> ...</p>
<div class="highlight"><pre><span></span>~/bin/keyboardconf <span class="p">&amp;</span>
</pre></div>
<p>Sources: homebin/<a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/keyboardconf">keyboardconf</a>, dotfiles/<a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.chromebook">.xbindkeysrc.chromebook</a>, dotfiles/<a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.chromebook">.xmodmap.chromebook</a>, dotfiles/<a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.thinkpad_usb">.xbindkeysrc.thinkpad_usb</a>, dotfiles/<a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.thinkpad_usb">.xmodmap.thinkpad_usb</a>, and dotfiles/<a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xinitrc">.xinitrc</a></p>
<p>Happy hacking!</p>

    <p class="articletags"><i class="fa fa-coffee"></i> More         &#8226; <a class="tag" href="http://www.circuidipity.com/tag-keyboard.html">keyboard</a>
        &#8226; <a class="tag" href="http://www.circuidipity.com/tag-shell.html">shell</a>
        &#8226; <a class="tag" href="http://www.circuidipity.com/tag-programming.html">programming</a>
        &#8226; <a class="tag" href="http://www.circuidipity.com/tag-homebin.html">homebin</a>
        &#8226; <a class="tag" href="http://www.circuidipity.com/tag-linux.html">linux</a>
</p>
</div>

<!-- Nav links to previous|next article -->
<div id="navmenu">
    <hr />
    <p class="prevpost"><i class="fa fa-arrow-left"></i> Older<br />
        <a href="http://www.circuidipity.com/xmodmap.html">Dot xmodmap</a></p>
    <p class="nextpost">Newer <i class="fa fa-arrow-right"></i><br />
        <a href="http://www.circuidipity.com/thinkpad-usb-keyboard-trackpoint.html">ThinkPad USB Keyboard with TrackPoint</a></p>
</div>


        <!-- footer -->
<div id="footer">
    <img class="imgfooter" src="./theme/images/footerbar.png" />
    <p class="contentinfo">
    <span class="noWrap">
        Copyright &#169; 2017 and
        <a rel="license" class="ccLicense" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA License</a> by
        <a rel="author" class="authorID" href="/">Daniel Wayne Armstrong</a>
    </span>
    <span class="noWrap">
        <i class="fa fa-globe"></i>
        Find me at <span class="whoa">daniel at circuidipity dot com</span>
    </span>
    <br />
    Don't miss a thing... updates by
    <a href="feed.xml">RSS</a> and
    <a class="subTweat" href="https://twitter.com/circuidipity">Twitter</a>
    </p>
</div></body>
</html>