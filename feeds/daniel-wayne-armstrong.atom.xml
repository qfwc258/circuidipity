<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Circuidipity - Daniel Wayne Armstrong</title><link href="http://www.circuidipity.com/" rel="alternate"></link><link href="http://www.circuidipity.com/feeds/daniel-wayne-armstrong.atom.xml" rel="self"></link><id>http://www.circuidipity.com/</id><updated>2017-06-21T09:50:00-04:00</updated><entry><title>Dot bashrc</title><link href="http://www.circuidipity.com/dot-bashrc.html" rel="alternate"></link><published>2017-06-21T09:50:00-04:00</published><updated>2017-06-21T09:50:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-21:/dot-bashrc.html</id><summary type="html">&lt;p&gt;I go ahead and customize my experience with the Bash shell by modifying the default &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.bashrc&lt;/span&gt;&lt;/tt&gt; placed in $HOME by Debian!&lt;/p&gt;
&lt;div class="section" id="history"&gt;
&lt;h2&gt;History&lt;/h2&gt;
&lt;p&gt;Disable truncating Bash history and &lt;strong&gt;save it all&lt;/strong&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Unlimited history.&lt;/span&gt;
&lt;span class="nv"&gt;HISTSIZE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;HISTFILESIZE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Change the history file location because certain bash sessions will still try and truncate &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.bash_history&lt;/span&gt;&lt;/tt&gt; upon …&lt;/p&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;I go ahead and customize my experience with the Bash shell by modifying the default &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.bashrc&lt;/span&gt;&lt;/tt&gt; placed in $HOME by Debian!&lt;/p&gt;
&lt;div class="section" id="history"&gt;
&lt;h2&gt;History&lt;/h2&gt;
&lt;p&gt;Disable truncating Bash history and &lt;strong&gt;save it all&lt;/strong&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Unlimited history.&lt;/span&gt;
&lt;span class="nv"&gt;HISTSIZE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;HISTFILESIZE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Change the history file location because certain bash sessions will still try and truncate &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.bash_history&lt;/span&gt;&lt;/tt&gt; upon close ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;HISTFILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/.bash_unlimited_history
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Default is to write history at the end of each session, overwriting the existing file with an updated version. If logged in with multiple sessions, only the last session to exit will have its history saved.&lt;/p&gt;
&lt;p&gt;Configure the prompt to write to history after every command and append to the history file, don't overwrite it ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;shopt&lt;/span&gt; -s histappend
&lt;span class="nv"&gt;PROMPT_COMMAND&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;history -a; &lt;/span&gt;&lt;span class="nv"&gt;$PROMPT_COMMAND&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add a timestamp per entry. Useful for context when viewing logfiles ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;HISTTIMEFORMAT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%FT%T  &amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Save all lines of a multiple-line command in the same history entry ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;shopt&lt;/span&gt; -s cmdhist
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Reedit a history substitution line if it failed, and edit a recalled history line before executing ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;shopt&lt;/span&gt; -s histreedit
&lt;span class="nb"&gt;shopt&lt;/span&gt; -s histverify
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Don't put lines starting with space in the history ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;HISTCONTROL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ignorespace
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Toggle recording history off/on for a current shell ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;stophistory&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;set +o history&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;starthistory&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;set -o history&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Helpful links! &lt;a class="reference external" href="https://stackoverflow.com/questions/9457233/unlimited-bash-history"&gt;Unlimited bash history&lt;/a&gt;; &lt;a class="reference external" href="http://superuser.com/questions/575479/bash-history-truncated-to-500-lines-on-each-login"&gt;History truncated on each login&lt;/a&gt;; &lt;a class="reference external" href="https://unix.stackexchange.com/questions/1288/preserve-bash-history-in-multiple-terminal-windows"&gt;Preserve history in multiple terminal windows&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="prompt"&gt;
&lt;h2&gt;Prompt&lt;/h2&gt;
&lt;p&gt;I set a two-line prompt (handy when displaying long pathnames), adjust the colour based on HOSTNAME, and if logged in remotely include an 'ssh-session' message ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; -n &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$SSH_CLIENT&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nv"&gt;ssh_message&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;: ssh-session&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="nv"&gt;$HOSTNAME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;deb&amp;quot;&lt;/span&gt;* &lt;span class="o"&gt;]]&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="nv"&gt;$HOSTNAME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ull&amp;quot;&lt;/span&gt;* &lt;span class="o"&gt;]]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nv"&gt;PS1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;\[\e[32;1m\]:(\[\e[37;1m\]\u@\h\[\e[33;1m\]&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;ssh_message&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\[\e[32;1m\])-(\[\e[34;1m\]\w\e[32;1m\])\n:.(\[\e[37;1m\]\!\[\e[32;1m\])-\[\e[37;1m\]\$\[\e[0m\] &amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="nv"&gt;PS1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;\[\e[32;1m\]:(\[\e[31;1m\]\u@\h\[\e[33;1m\]&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;ssh_message&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\[\e[32;1m\])-(\[\e[34;1m\]\w\e[32;1m\])\n:.(\[\e[31;1m\]\!\[\e[32;1m\])-\[\e[37;1m\]\$\[\e[0m\] &amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Which generates ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;:&lt;span class="o"&gt;(&lt;/span&gt;daniel@debian&lt;span class="o"&gt;)&lt;/span&gt;-&lt;span class="o"&gt;(&lt;/span&gt;~&lt;span class="o"&gt;)&lt;/span&gt;
:.&lt;span class="o"&gt;(&lt;/span&gt;1054&lt;span class="o"&gt;)&lt;/span&gt;-$ ssh foobian
:&lt;span class="o"&gt;(&lt;/span&gt;daniel@foobian: ssh-session&lt;span class="o"&gt;)&lt;/span&gt;-&lt;span class="o"&gt;(&lt;/span&gt;~&lt;span class="o"&gt;)&lt;/span&gt;
:.&lt;span class="o"&gt;(&lt;/span&gt;192&lt;span class="o"&gt;)&lt;/span&gt;-$
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="aliases-and-functions"&gt;
&lt;h2&gt;Aliases and functions&lt;/h2&gt;
&lt;p&gt;Enable color support of &lt;tt class="docutils literal"&gt;ls&lt;/tt&gt; and a few handy aliases ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -x /usr/bin/dircolors &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nb"&gt;test&lt;/span&gt; -r ~/.dircolors &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;dircolors -b ~/.dircolors&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;dircolors -b&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;ls&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ls -aFlhv --color=auto&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;diff&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;colordiff&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dir --color=auto&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;vdir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;vdir --color=auto&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;grep&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;grep --color=auto&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;fgrep&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;fgrep --color=auto&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;egrep&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;egrep --color=auto&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="c1"&gt;# More aliases and functions.&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; ..&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;cd ..&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;aaa&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;sudo apt update &amp;amp;&amp;amp; apt list --upgradable &amp;amp;&amp;amp; sudo apt full-upgrade&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;arst&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;setxkbmap us &amp;amp;&amp;amp; xmodmap ~/.xmodmap&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;asdf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;setxkbmap us -variant colemak &amp;amp;&amp;amp; xmodmap ~/.xmodmap&amp;quot;&lt;/span&gt;
bak&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; f in &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; cp &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="s2"&gt;.&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;date +%FT%H%M%S&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;.bak&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;df&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;df -hT --total&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;dpkgg&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dpkg -l | grep -i&amp;quot;&lt;/span&gt;
dsrt&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; du -ach &lt;span class="nv"&gt;$1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sort -h&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;free&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;free -h&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;gpush&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;git push -u origin master&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;gsave&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;git commit -m &amp;#39;save&amp;#39;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;gs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;git status&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;histg&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;history | grep&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;lsl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ls | less&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;mkdir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;mkdir -pv&amp;quot;&lt;/span&gt;
mcd&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; mkdir -p &lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
mtg&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; f in &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; mv &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;f&lt;/span&gt;&lt;span class="p"&gt;//[^a-zA-Z0-9&lt;/span&gt;&lt;span class="se"&gt;\.\-&lt;/span&gt;&lt;span class="p"&gt;]/_&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;pgrep&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pgrep -a&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;psg&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ps aux | grep -v grep | grep -i -e VSZ -e&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;tmuxa&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;tmux -f &lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;&lt;span class="s2"&gt;/.tmux.default.conf attach&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;wget&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;wget -c&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;zzz&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;sync &amp;amp;&amp;amp; systemctl suspend&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="extras"&gt;
&lt;h2&gt;Extras&lt;/h2&gt;
&lt;p&gt;Automatically prepend &lt;tt class="docutils literal"&gt;cd&lt;/tt&gt; when entering just a path in the shell ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;shopt&lt;/span&gt; -s autocd
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/secure-remote-access-using-ssh-keys.html#key-management"&gt;Setup keychain&lt;/a&gt; for ssh-agent management ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -x /usr/bin/keychain &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    keychain ~/.ssh/id_rsa
    . ~/.keychain/&lt;span class="nv"&gt;$HOSTNAME&lt;/span&gt;-sh
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add directories to my &lt;tt class="docutils literal"&gt;$PATH&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;:/sbin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Disable XON/XOFF flow control ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;stty -ixon
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... which enables the use of &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;CNTRL-S&lt;/span&gt;&lt;/tt&gt; in other commands. &lt;strong&gt;Example:&lt;/strong&gt; forward search in history, and disabling screen freeze in vim.&lt;/p&gt;
&lt;p&gt;When happy with the changes, save file and reload the config ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;source&lt;/span&gt; ~/.bashrc
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Link: &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.bashrc"&gt;dotfiles/.bashrc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
</content><category term="dotfiles"></category><category term="shell"></category><category term="linux"></category></entry><entry><title>Getting started with Neovim</title><link href="http://www.circuidipity.com/neovim.html" rel="alternate"></link><published>2017-06-20T07:30:00-04:00</published><updated>2017-06-20T07:30:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-20:/neovim.html</id><summary type="html">&lt;p&gt;Text-wrangling is a big part of unlocking the power of Linux and programming ... and with great power comes the need for a great text editor!&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;I have used &lt;strong&gt;Vim&lt;/strong&gt; in the past but barely scratched the surface of its features motherlode. A friend who is a &lt;a class="reference external" href="http://gilesorr.com/blog/tag/vim.html"&gt;passionate vim …&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;Text-wrangling is a big part of unlocking the power of Linux and programming ... and with great power comes the need for a great text editor!&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;I have used &lt;strong&gt;Vim&lt;/strong&gt; in the past but barely scratched the surface of its features motherlode. A friend who is a &lt;a class="reference external" href="http://gilesorr.com/blog/tag/vim.html"&gt;passionate vim user&lt;/a&gt; recommended I try &lt;strong&gt;Neovim&lt;/strong&gt;, which &amp;quot;&lt;em&gt;strives to be a superset of Vim except for some intentionally-removed misfeatures... [and] is built for users who want the good parts of Vim, and more&lt;/em&gt;&amp;quot;. Sounds good!&lt;/p&gt;
&lt;div class="section" id="install"&gt;
&lt;h3&gt;0. Install&lt;/h3&gt;
&lt;p&gt;Neovim packages are available in Debian ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install neovim
$ sudo apt install python-dev python-pip python3-dev python3-pip
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="launch"&gt;
&lt;h3&gt;1. Launch&lt;/h3&gt;
&lt;p&gt;Launch editor ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ nvim
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On first launch the &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.local/share/nvim/{shada,swap}&lt;/span&gt;&lt;/tt&gt; directories are auto-generated. Manually create a new &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.config/nvim&lt;/span&gt;&lt;/tt&gt; directory ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir ~/.config/nvim
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and create a &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.config/nvim/init.vim&lt;/span&gt;&lt;/tt&gt; config file (or link to an existing &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.vimrc&lt;/span&gt;&lt;/tt&gt;). My general settings ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt; nocompatible            &lt;span class="s2"&gt;&amp;quot; Disable compatibility to old-time vi&lt;/span&gt;
&lt;span class="s2"&gt;set showmatch               &amp;quot;&lt;/span&gt; Show matching brackets.
&lt;span class="nb"&gt;set&lt;/span&gt; ignorecase              &lt;span class="s2"&gt;&amp;quot; Do case insensitive matching&lt;/span&gt;
&lt;span class="s2"&gt;set mouse=v                 &amp;quot;&lt;/span&gt; middle-click paste with mouse
&lt;span class="nb"&gt;set&lt;/span&gt; hlsearch                &lt;span class="s2"&gt;&amp;quot; highlight search results&lt;/span&gt;
&lt;span class="s2"&gt;set tabstop=4               &amp;quot;&lt;/span&gt; number of columns occupied by a tab character
&lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="nv"&gt;softtabstop&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;           &lt;span class="s2"&gt;&amp;quot; see multiple spaces as tabstops so &amp;lt;BS&amp;gt; does the right thing&lt;/span&gt;
&lt;span class="s2"&gt;set expandtab               &amp;quot;&lt;/span&gt; converts tabs to white space
&lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="nv"&gt;shiftwidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;            &lt;span class="s2"&gt;&amp;quot; width for autoindents&lt;/span&gt;
&lt;span class="s2"&gt;set autoindent              &amp;quot;&lt;/span&gt; indent a new line the same amount as the line just typed
&lt;span class="nb"&gt;set&lt;/span&gt; number                  &lt;span class="s2"&gt;&amp;quot; add line numbers&lt;/span&gt;
&lt;span class="s2"&gt;set wildmode=longest,list   &amp;quot;&lt;/span&gt; get bash-like tab completions
&lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="nv"&gt;cc&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;80&lt;/span&gt;                   &lt;span class="s2"&gt;&amp;quot; set an 80 column border for good coding style&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Check out Neovim's built-in &lt;tt class="docutils literal"&gt;:help&lt;/tt&gt; command and the &lt;a class="reference external" href="https://neovim.io/doc/"&gt;online documentation&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;Source: &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.config/nvim/init.vim"&gt;dotfiles/.config/nvim/init.vim&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="spelling"&gt;
&lt;h3&gt;2. Spelling&lt;/h3&gt;
&lt;p&gt;Toggle spell checking with the command &lt;tt class="docutils literal"&gt;:set invspell&lt;/tt&gt;. First time the command is invoked it prompts to download the &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;utf-8&lt;/span&gt;&lt;/tt&gt; spell files ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;spellfile#LoadFile&lt;span class="o"&gt;()&lt;/span&gt;: No &lt;span class="o"&gt;(&lt;/span&gt;writable&lt;span class="o"&gt;)&lt;/span&gt; spell directory found.
Created /home/dwa/.local/share/nvim/site/spell
No spell file &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;en&amp;quot;&lt;/span&gt; in utf-8
Download it?
&lt;span class="o"&gt;(&lt;/span&gt;Y&lt;span class="o"&gt;)&lt;/span&gt;es, &lt;span class="o"&gt;[&lt;/span&gt;N&lt;span class="o"&gt;]&lt;/span&gt;o:Y

Downloading en.utf-8.spl...
&lt;span class="s2"&gt;&amp;quot;~/.local/share/nvim/site/spell/en.utf-8.spl&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;New&lt;span class="o"&gt;]&lt;/span&gt; 1121L, 609337C written
Downloading en.utf-8.sug...
&lt;span class="s2"&gt;&amp;quot;~/.local/share/nvim/site/spell/en.utf-8.sug&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;New&lt;span class="o"&gt;]&lt;/span&gt; 2512L, 596961C written
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;My own added words are saved in &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.config/nvim/spell/{en.utf-8.add,en.utf-8.add.spl}&lt;/span&gt;&lt;/tt&gt;. Add a hot-key for the spell checker in &lt;tt class="docutils literal"&gt;init.vim&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; toggle spelling&lt;/span&gt;
&lt;span class="s2"&gt;nnoremap &amp;lt;leader&amp;gt;s :set invspell&amp;lt;CR&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="colors"&gt;
&lt;h3&gt;3. Colors&lt;/h3&gt;
&lt;p&gt;Neovim includes a few color schemes and more are available for download. Create a &lt;tt class="docutils literal"&gt;colors&lt;/tt&gt; directory to hold extra schemes ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p ~/.config/nvim/colors
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I use the &lt;a class="reference external" href="http://www.vim.org/scripts/script.php?script_id=2777"&gt;tir_black&lt;/a&gt; scheme. Download and save in the new directory. Set as default color scheme in &lt;tt class="docutils literal"&gt;init.vim&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; color scheme&lt;/span&gt;
&lt;span class="s2"&gt;colorscheme tir_black&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I ran into the problem where the color scheme worked in the (urxvt) terminal but not inside a &lt;strong&gt;tmux&lt;/strong&gt; session. Turns out my tmux was not seeing the 256 color palette ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ tput colors
8
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;[ Fix! ]&lt;/strong&gt; Add this setting to &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.tmux.conf&lt;/span&gt;&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt; -g default-terminal &lt;span class="s2"&gt;&amp;quot;rxvt-unicode-256color&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It is important to &lt;strong&gt;kill all existing tmux sessions&lt;/strong&gt; to see the changes take effect. It is &lt;a class="reference external" href="http://stackoverflow.com/a/25940093"&gt;not enough to simply start a fresh session.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Now the colors work OK!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$TERM&lt;/span&gt;
rxvt-unicode-256color
$ tput colors
256
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="plugins"&gt;
&lt;h3&gt;4. Plugins&lt;/h3&gt;
&lt;p&gt;Extend the core features of the text editor using plugins. With a fresh install of Neovim, now is a good time to setup a &lt;strong&gt;plugin manager&lt;/strong&gt;. I install &lt;a class="reference external" href="https://github.com/VundleVim/Vundle.vim"&gt;Vundle&lt;/a&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p ~/.config/nvim/bundle
    $ git clone https://github.com/VundleVim/Vundle.vim.git ~/.config/nvim/bundle/Vundle.vim
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Configure neovim to use vundle by modifying &lt;tt class="docutils literal"&gt;init.vim&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;filetype off
&lt;span class="s2"&gt;&amp;quot; set the runtime path to include Vundle and initialize&lt;/span&gt;
&lt;span class="s2"&gt;set rtp+=~/.config/nvim/bundle/Vundle.vim&lt;/span&gt;
&lt;span class="s2"&gt;call vundle#begin(&amp;#39;~/.config/nvim/bundle&amp;#39;)&lt;/span&gt;

&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="nb"&gt;let&lt;/span&gt; Vundle manage Vundle, required
Plugin &lt;span class="s1"&gt;&amp;#39;VundleVim/Vundle.vim&amp;#39;&lt;/span&gt;

&lt;span class="s2"&gt;&amp;quot; All of your Plugins must be added before the following line&lt;/span&gt;
&lt;span class="s2"&gt;call vundle#end()&lt;/span&gt;
&lt;span class="s2"&gt;filetype plugin indent on  &amp;quot;&lt;/span&gt; allows auto-indenting depending on file &lt;span class="nb"&gt;type&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Install plugins by adding &lt;tt class="docutils literal"&gt;Plugin 'plugin/name'&lt;/tt&gt; between &lt;tt class="docutils literal"&gt;vundle#begin()&lt;/tt&gt; and &lt;tt class="docutils literal"&gt;vundle#end()&lt;/tt&gt;, then launch the installer ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ nvim +PluginInstall +qall
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A few plugins I have found very useful from the start ...&lt;/p&gt;
&lt;div class="section" id="syntastic"&gt;
&lt;h4&gt;Syntastic&lt;/h4&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/vim-syntastic/syntastic"&gt;Syntax checking plugin&lt;/a&gt; that makes use of external syntax checkers. I install &lt;strong&gt;pylint&lt;/strong&gt; for checking Python syntax and &lt;strong&gt;shellcheck&lt;/strong&gt; for Bash scripting ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install pylint pylint3 shellcheck
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add the plugin to &lt;tt class="docutils literal"&gt;init.vim&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Plugin &lt;span class="s1"&gt;&amp;#39;vim-syntastic/syntastic&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... plus the &lt;a class="reference external" href="https://github.com/vim-syntastic/syntastic#settings"&gt;FAQ&lt;/a&gt; recommends some defaults ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt; statusline+&lt;span class="o"&gt;=&lt;/span&gt;%#warningmsg#
&lt;span class="nb"&gt;set&lt;/span&gt; statusline+&lt;span class="o"&gt;=&lt;/span&gt;%&lt;span class="o"&gt;{&lt;/span&gt;SyntasticStatuslineFlag&lt;span class="o"&gt;()}&lt;/span&gt;
&lt;span class="nb"&gt;set&lt;/span&gt; statusline+&lt;span class="o"&gt;=&lt;/span&gt;%*

&lt;span class="nb"&gt;let&lt;/span&gt; g:syntastic_always_populate_loc_list &lt;span class="o"&gt;=&lt;/span&gt; 1
&lt;span class="nb"&gt;let&lt;/span&gt; g:syntastic_auto_loc_list &lt;span class="o"&gt;=&lt;/span&gt; 1
&lt;span class="nb"&gt;let&lt;/span&gt; g:syntastic_check_on_open &lt;span class="o"&gt;=&lt;/span&gt; 1
&lt;span class="nb"&gt;let&lt;/span&gt; g:syntastic_check_on_wq &lt;span class="o"&gt;=&lt;/span&gt; 0
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... plus (optional) enable &lt;a class="reference external" href="https://github.com/vim-syntastic/syntastic/issues/1767#issuecomment-217834857"&gt;pylint checking for python3&lt;/a&gt; (the default falls back on python2) ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;let&lt;/span&gt; g:syntastic_python_pylint_exe &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;python3 -m pylint3&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="vim-gitgutter"&gt;
&lt;h4&gt;Vim-gitgutter&lt;/h4&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/airblade/vim-gitgutter"&gt;Plugin that displays a git diff&lt;/a&gt; column at the side of a document marking where lines have been added, modified, or removed.&lt;/p&gt;
&lt;p&gt;Add the plugin to &lt;tt class="docutils literal"&gt;init.vim&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Plugin &lt;span class="s1"&gt;&amp;#39;airblade/vim-gitgutter&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="vimwiki"&gt;
&lt;h4&gt;Vimwiki&lt;/h4&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/vimwiki/vimwiki"&gt;Personal wiki plugin&lt;/a&gt; that I use as a simple notebook.&lt;/p&gt;
&lt;p&gt;Add the plugin to &lt;tt class="docutils literal"&gt;init.vim&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Plugin &lt;span class="s1"&gt;&amp;#39;vimwiki/vimwiki&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Default file location is &lt;tt class="docutils literal"&gt;~/vimwiki&lt;/tt&gt;. To set a different location (example: &lt;tt class="docutils literal"&gt;~/doc/wiki/&lt;/tt&gt;) ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;let&lt;/span&gt; g:vimwiki_list &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;path&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;~/doc/wiki/&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;path_html&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;~/doc/wiki/html/&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;}]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I &lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/dlg"&gt;created a little script&lt;/a&gt; that runs a &lt;tt class="docutils literal"&gt;git commit&lt;/tt&gt; before launching the wiki.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="default"&gt;
&lt;h3&gt;5. Default&lt;/h3&gt;
&lt;p&gt;I set Neovim to be my default editor (for system tasks like &lt;tt class="docutils literal"&gt;visudo&lt;/tt&gt;) ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo update-alternatives --config editor
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="neovim"></category><category term="vim"></category><category term="linux"></category></entry><entry><title>Jessiebook to Stretchbook</title><link href="http://www.circuidipity.com/jessiebook-to-stretchbook.html" rel="alternate"></link><published>2017-06-19T10:20:00-04:00</published><updated>2017-06-19T10:20:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-19:/jessiebook-to-stretchbook.html</id><summary type="html">&lt;p&gt;With the release of &lt;strong&gt;Debian 9 &amp;quot;Stretch&amp;quot;&lt;/strong&gt; my &lt;a class="reference external" href="http://www.circuidipity.com/c720-chromebook-to-jessiebook.html"&gt;C720 Chromebook has transitioned from a Jessiebook&lt;/a&gt; to a Stretchbook!&lt;/p&gt;
&lt;p&gt;I posted a &lt;a class="reference external" href="http://www.circuidipity.com/minimal-debian.html"&gt;visual screenshot tour&lt;/a&gt; installing the Debian _stable_ release. I use Debian's &lt;strong&gt;minimal network install image&lt;/strong&gt; to create a console-only base configuration that can be customized for various tasks and …&lt;/p&gt;</summary><content type="html">&lt;p&gt;With the release of &lt;strong&gt;Debian 9 &amp;quot;Stretch&amp;quot;&lt;/strong&gt; my &lt;a class="reference external" href="http://www.circuidipity.com/c720-chromebook-to-jessiebook.html"&gt;C720 Chromebook has transitioned from a Jessiebook&lt;/a&gt; to a Stretchbook!&lt;/p&gt;
&lt;p&gt;I posted a &lt;a class="reference external" href="http://www.circuidipity.com/minimal-debian.html"&gt;visual screenshot tour&lt;/a&gt; installing the Debian _stable_ release. I use Debian's &lt;strong&gt;minimal network install image&lt;/strong&gt; to create a console-only base configuration that can be customized for various tasks and &lt;a class="reference external" href="http://www.circuidipity.com/i3-tiling-window-manager.html"&gt;alternate desktops&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/c720-chromebook-to-jessiebook.html"&gt;Earlier steps&lt;/a&gt; taken to setup the Jessiebook still apply with two exceptions. First, &lt;tt class="docutils literal"&gt;xbacklight&lt;/tt&gt; is acting up ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xbacklight -dec 10
No outputs have backlight property
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I &lt;strong&gt;can&lt;/strong&gt; write to the file directly to increase/decrease the brightness of the display ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /sys/class/backlight/intel_backlight/max_brightness
937
$ sudo sh -c &lt;span class="s1"&gt;&amp;#39;echo 500 &amp;gt; /sys/class/backlight/intel_backlight/brightness&amp;#39;&lt;/span&gt;
$ sudo sh -c &lt;span class="s1"&gt;&amp;#39;echo 937 &amp;gt; /sys/class/backlight/intel_backlight/brightness&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... or use &lt;tt class="docutils literal"&gt;xrandr&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xrandr --output eDP-1 --brightness 0.5
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is &lt;a class="reference external" href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=833508"&gt;a known issue.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[ Fix! ]&lt;/strong&gt; Roll-back from &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;xserver-xorg-core&lt;/span&gt;&lt;/tt&gt; to &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;xserver-xorg-video-intel&lt;/span&gt;&lt;/tt&gt;. Create &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;/etc/X11/xorg.conf.d/10-video-intel.conf&lt;/span&gt;&lt;/tt&gt; containing ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Section &lt;span class="s2"&gt;&amp;quot;Device&amp;quot;&lt;/span&gt;
        Identifier &lt;span class="s2"&gt;&amp;quot;Intel&amp;quot;&lt;/span&gt;
        Driver &lt;span class="s2"&gt;&amp;quot;intel&amp;quot;&lt;/span&gt;
EndSection
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Second, the issues with the &lt;strong&gt;ath9k&lt;/strong&gt; driver appear resolved and I leave the wireless alone. No further config tweaks required.&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
</content><category term="chromebook"></category><category term="debian"></category><category term="linux"></category></entry><entry><title>Debian _stable_ setup</title><link href="http://www.circuidipity.com/debian-stable-setup.html" rel="alternate"></link><published>2017-06-18T07:30:00-04:00</published><updated>2017-06-18T07:30:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-18:/debian-stable-setup.html</id><summary type="html">&lt;img alt="Debian 9 Stretch" src="images/debian_9_banner.png" style="width: 800px; height: 75px;" /&gt;
&lt;p&gt;I created the post-install configuration shell script &lt;strong&gt;debian-stable-setup.sh&lt;/strong&gt; to ideally be run immediately following the first successful boot into a fresh install of Debian.&lt;/p&gt;
&lt;p&gt;Building on a &lt;a class="reference external" href="http://www.circuidipity.com/minimal-debian.html"&gt;minimal install&lt;/a&gt; the system will be configured to track Debian's _stable_ release. A choice of either 1) a basic console setup (option …&lt;/p&gt;</summary><content type="html">&lt;img alt="Debian 9 Stretch" src="images/debian_9_banner.png" style="width: 800px; height: 75px;" /&gt;
&lt;p&gt;I created the post-install configuration shell script &lt;strong&gt;debian-stable-setup.sh&lt;/strong&gt; to ideally be run immediately following the first successful boot into a fresh install of Debian.&lt;/p&gt;
&lt;p&gt;Building on a &lt;a class="reference external" href="http://www.circuidipity.com/minimal-debian.html"&gt;minimal install&lt;/a&gt; the system will be configured to track Debian's _stable_ release. A choice of either 1) a basic console setup (option '-b'); or 2) a more complete setup which includes the &lt;a class="reference external" href="http://www.circuidipity.com/i3-tiling-window-manager.html"&gt;i3 tiling window manager&lt;/a&gt; plus a packages collection suitable for a workstation will be installed.&lt;/p&gt;
&lt;p&gt;Depends: &lt;tt class="docutils literal"&gt;bash&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Link: &lt;a class="reference external" href="https://github.com/vonbrownie/linux-post-install/tree/master/scripts/debian-stable-setup"&gt;linux-post-install/scripts/debian-stable-setup&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
</content><category term="debian"></category><category term="linux"></category><category term="shell"></category><category term="programming"></category></entry><entry><title>Neurocomic</title><link href="http://www.circuidipity.com/neurocomic.html" rel="alternate"></link><published>2017-06-16T09:38:00-04:00</published><updated>2017-06-16T09:38:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-16:/neurocomic.html</id><summary type="html">&lt;img alt="Neurocomic cover" class="align-left" src="images/neurocomic.jpg" style="width: 150px; height: 205px;" /&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;Neurocomic&lt;/strong&gt; &lt;em&gt;by Dr. Matteo Farinella and Dr. Hana Ros&lt;/em&gt;&lt;/div&gt;
&lt;div class="line"&gt;(ISBN: 9781907704703)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A wonderful graphic novel sponsored by the Wellcome Trust that takes an expedition through the human brain and where we meet explorers along the way: &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Santiago_Ram%C3%B3n_y_Cajal"&gt;Santiago Ramón y Cajal&lt;/a&gt; and &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Camillo_Golgi"&gt;Camillo Golgi&lt;/a&gt; in the neural forest, &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Charles_Scott_Sherrington"&gt;Charles Scott Sherrington …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;img alt="Neurocomic cover" class="align-left" src="images/neurocomic.jpg" style="width: 150px; height: 205px;" /&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;Neurocomic&lt;/strong&gt; &lt;em&gt;by Dr. Matteo Farinella and Dr. Hana Ros&lt;/em&gt;&lt;/div&gt;
&lt;div class="line"&gt;(ISBN: 9781907704703)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A wonderful graphic novel sponsored by the Wellcome Trust that takes an expedition through the human brain and where we meet explorers along the way: &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Santiago_Ram%C3%B3n_y_Cajal"&gt;Santiago Ramón y Cajal&lt;/a&gt; and &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Camillo_Golgi"&gt;Camillo Golgi&lt;/a&gt; in the neural forest, &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Charles_Scott_Sherrington"&gt;Charles Scott Sherrington&lt;/a&gt; and &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Bernard_Katz"&gt;Bernard Katz&lt;/a&gt; down in the synaptic control room readying a release of vesicles, paratrooping neurotransmitters, fending off giant squid with &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Alan_Lloyd_Hodgkin"&gt;Alan Hodgkin&lt;/a&gt; and &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Andrew_Huxley"&gt;Andrew Huxley&lt;/a&gt;, &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Eric_Kandel"&gt;Eric Kandel&lt;/a&gt; and &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Classical_conditioning"&gt;Pavlov (not) feeding the dog&lt;/a&gt;, &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Hans_Berger"&gt;Hans Berger&lt;/a&gt; atop the mountain, finally pushing on to face our (false?) sense of self in the Castle of Consciousness.&lt;/p&gt;
&lt;p&gt;I am really intrigued by Berger's invention of the &lt;strong&gt;electroencephalogram&lt;/strong&gt; in 1924 and what reading the electrical activity of the brain actually represents, and how we could possibly tease more data out of the patterns. It sounds like the kind of &lt;strong&gt;affordable and noninvasive&lt;/strong&gt; (bonus!) tech that lends itself to happy hacking!&lt;/p&gt;
</content><category term="books"></category></entry><entry><title>Verify a PGP signature with GnuPG</title><link href="http://www.circuidipity.com/verify-pgp-signature-gnupg.html" rel="alternate"></link><published>2017-06-10T09:00:00-04:00</published><updated>2017-06-18T11:45:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-10:/verify-pgp-signature-gnupg.html</id><summary type="html">&lt;p&gt;I setup &lt;a class="reference external" href="https://www.gnupg.org/"&gt;GNU Privacy Guard&lt;/a&gt; (&lt;strong&gt;GnuPG&lt;/strong&gt; or &lt;strong&gt;GPG&lt;/strong&gt;) - a free software implementation of OpenPGP - and use the utility to verify the PGP signatures of files.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Using a &lt;strong&gt;PGP private/public keypair&lt;/strong&gt; to create a &lt;strong&gt;digital signature&lt;/strong&gt; for a file certifies its integrity. A developer signs a package with …&lt;/p&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;I setup &lt;a class="reference external" href="https://www.gnupg.org/"&gt;GNU Privacy Guard&lt;/a&gt; (&lt;strong&gt;GnuPG&lt;/strong&gt; or &lt;strong&gt;GPG&lt;/strong&gt;) - a free software implementation of OpenPGP - and use the utility to verify the PGP signatures of files.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Using a &lt;strong&gt;PGP private/public keypair&lt;/strong&gt; to create a &lt;strong&gt;digital signature&lt;/strong&gt; for a file certifies its integrity. A developer signs a package with their private key and the receiver verifies the signature with the public key. If the package has been modified or corrupted in transmission the verification will fail.&lt;/p&gt;
&lt;div class="section" id="install-gnupg"&gt;
&lt;h3&gt;0. Install GnuPG&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install gnupg dirmngr
$ gpg --version
gpg &lt;span class="o"&gt;(&lt;/span&gt;GnuPG&lt;span class="o"&gt;)&lt;/span&gt; 2.1.18
libgcrypt 1.7.6-beta
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;First time invoking &lt;tt class="docutils literal"&gt;gpg &lt;span class="pre"&gt;--list-keys&lt;/span&gt;&lt;/tt&gt; with an empty &lt;strong&gt;keyring&lt;/strong&gt; generates a config directory in $HOME ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gpg --list-keys
gpg: directory &lt;span class="s1"&gt;&amp;#39;/home/dwa/.gnupg&amp;#39;&lt;/span&gt; created
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Default config files are &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.gnupg/gpg.conf&lt;/span&gt;&lt;/tt&gt; and &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.gnupg/dirmngr.conf&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="keyserver"&gt;
&lt;h3&gt;1. Keyserver&lt;/h3&gt;
&lt;p&gt;Many keys are stored on a &lt;strong&gt;keyserver&lt;/strong&gt;. I choose the &lt;a class="reference external" href="https://riseup.net/en/security/message-security/openpgp/best-practices#selecting-a-keyserver-and-configuring-your-machine-to-refresh-your-keyring"&gt;recommended sks keyserver pool&lt;/a&gt;. Download the &lt;strong&gt;sks-keyservers.net CA&lt;/strong&gt; and verify the certificate ... &lt;a class="footnote-reference" href="#id3" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ wget https://sks-keyservers.net/sks-keyservers.netCA.pem -P ~/.gnupg/
$ &lt;span class="nb"&gt;cd&lt;/span&gt; ~/.gnupg
$ openssl verify -trusted sks-keyservers.netCA.pem -check_ss_sig sks-keyservers.netCA.pem
sks-keyservers.netCA.pem: OK
$ openssl x509 -in sks-keyservers.netCA.pem -noout -text &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;quot;X509v3 Subject Key Identifier&amp;quot;&lt;/span&gt; -A1 &lt;span class="p"&gt;|&lt;/span&gt; tail -n1
    E4:C3:2A:09:14:67:D8:4D:52:12:4E:93:3C:13:E8:A0:8D:DA:B6:F3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and compare with the &lt;a class="reference external" href="https://sks-keyservers.net/verify_tls.php"&gt;key identifier recorded at sks-keyservers.net.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Add the keyserver and the CA to &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.gnupg/dirmngr.conf&lt;/span&gt;&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;keyserver hkps://hkps.pool.sks-keyservers.net
hkp-cacert ~/.gnupg/sks-keyservers.netCA.pem
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Link: &lt;a class="reference external" href="https://riseup.net/en/security/message-security/openpgp/best-practices"&gt;OpenPGP Best Practices&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="verify-a-pgp-signature"&gt;
&lt;h3&gt;2. Verify a PGP signature&lt;/h3&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.debian.org/CD/verify"&gt;Verifying authenticity of Debian installer images:&lt;/a&gt; &amp;quot;Cryptographically strong checksum algorithms (SHA256 and SHA512) are available for every release ... To ensure that the checksums files themselves are correct, use GnuPG to verify them against the accompanying signature files.&amp;quot;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt; Download the (unofficial with firmware) &lt;strong&gt;minimal network installer&lt;/strong&gt; and the signed checksum files ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ wget https://cdimage.debian.org/mirror/cdimage/unofficial/non-free/cd-including-firmware/current/amd64/iso-cd/firmware-9.0.0-amd64-netinst.iso
$ wget https://cdimage.debian.org/mirror/cdimage/unofficial/non-free/cd-including-firmware/current/amd64/iso-cd/SHA512SUMS.sign
$ wget https://cdimage.debian.org/mirror/cdimage/unofficial/non-free/cd-including-firmware/current/amd64/iso-cd/SHA512SUMS
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Display the signing key ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gpg --verify SHA512SUMS.sign SHA512SUMS
gpg: Signature made Sun &lt;span class="m"&gt;07&lt;/span&gt; May &lt;span class="m"&gt;2017&lt;/span&gt; 02:28:21 PM EDT
gpg:                using RSA key DA87E80D6294BE9B
gpg: Can&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;t check signature: No public key
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Show details of the key on the keyserver ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gpg --search-keys DA87E80D6294BE9B
gpg: data source: https://gozer.rediris.es:443
&lt;span class="o"&gt;(&lt;/span&gt;1&lt;span class="o"&gt;)&lt;/span&gt; Debian CD signing key &amp;lt;debian-cd@lists.debian.org&amp;gt;
  &lt;span class="m"&gt;4096&lt;/span&gt; bit RSA key DA87E80D6294BE9B, created: 2011-01-05
  Keys 1-1 of &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;DA87E80D6294BE9B&amp;quot;&lt;/span&gt;.  Enter number&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;, N&lt;span class="o"&gt;)&lt;/span&gt;ext, or Q&lt;span class="o"&gt;)&lt;/span&gt;uit &amp;gt; n
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Import the key from the keyserver ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gpg --recv-keys DA87E80D6294BE9B
gpg: key DA87E80D6294BE9B: public key &lt;span class="s2"&gt;&amp;quot;Debian CD signing key &amp;lt;debian-cd@lists.debian.org&amp;gt;&amp;quot;&lt;/span&gt; imported
gpg: no ultimately trusted keys found
gpg: Total number processed: 1
gpg:               imported: 1
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Display the keyring containing our new key ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gpg --list-keys
/home/dwa/.gnupg/pubring.kbx
----------------------------
pub   rsa4096 2011-01-05 &lt;span class="o"&gt;[&lt;/span&gt;SC&lt;span class="o"&gt;]&lt;/span&gt;
    DF9B9C49EAA9298432589D76DA87E80D6294BE9B
    uid           &lt;span class="o"&gt;[&lt;/span&gt; unknown&lt;span class="o"&gt;]&lt;/span&gt; Debian CD signing key &amp;lt;debian-cd@lists.debian.org&amp;gt;
    sub   rsa4096 2011-01-05 &lt;span class="o"&gt;[&lt;/span&gt;E&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After importing the signing key ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gpg --verify SHA512SUMS.sign SHA512SUMS
gpg: Signature made Sun &lt;span class="m"&gt;07&lt;/span&gt; May &lt;span class="m"&gt;2017&lt;/span&gt; 02:28:21 PM EDT
gpg:                using RSA key DA87E80D6294BE9B
gpg: Good signature from &lt;span class="s2"&gt;&amp;quot;Debian CD signing key &amp;lt;debian-cd@lists.debian.org&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;unknown&lt;span class="o"&gt;]&lt;/span&gt;
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: DF9B 9C49 EAA9 &lt;span class="m"&gt;2984&lt;/span&gt; &lt;span class="m"&gt;3258&lt;/span&gt;  9D76 DA87 E80D &lt;span class="m"&gt;6294&lt;/span&gt; BE9B
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The warning about &lt;tt class="docutils literal"&gt;key is not certified with a trusted signature&lt;/tt&gt; means GnuPG verified the key matches the signature but cannot guarantee the key really belongs to the developer. It is up to me to decide how much confidence to place in the authenticity of the key.&lt;/p&gt;
&lt;p&gt;For this Debian-provided signature file I compare the &lt;tt class="docutils literal"&gt;Primary key fingerprint&lt;/tt&gt; line to the key fingerprints recorded on &lt;a class="reference external" href="https://www.debian.org/CD/verify"&gt;the Debian website.&lt;/a&gt; Looks good! &lt;a class="footnote-reference" href="#id4" id="id2"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="verify-file-integrity"&gt;
&lt;h3&gt;3. Verify file integrity&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sha512sum --ignore-missing --check SHA512SUMS
firmware-9.0.0-amd64-netinst.iso: OK
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;div class="section" id="notes"&gt;
&lt;h4&gt;Notes&lt;/h4&gt;
&lt;table class="docutils footnote" frame="void" id="id3" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Verifying &lt;a class="reference external" href="https://github.com/riseupnet/riseup_help/issues/145"&gt;keyserver pool certificate.&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id4" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a class="reference external" href="https://lkml.org/lkml/2016/8/15/445"&gt;DO NOT TRUST ANYTHING SHORTER THAN THE FINGERPRINTS.&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="gpg"></category><category term="crypto"></category><category term="shell"></category><category term="debian"></category><category term="linux"></category></entry><entry><title>The Diving-Bell and the Butterfly</title><link href="http://www.circuidipity.com/diving-bell-and-the-butterfly.html" rel="alternate"></link><published>2017-06-09T07:30:00-04:00</published><updated>2017-06-09T07:30:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-09:/diving-bell-and-the-butterfly.html</id><summary type="html">&lt;img alt="book cover" class="align-left" src="images/diving-bell-and-the-butterfly.jpg" style="width: 150px; height: 243px;" /&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;The Diving-Bell and the Butterfly&lt;/strong&gt; &lt;em&gt;by Jean-Dominique Bauby&lt;/em&gt;&lt;/div&gt;
&lt;div class="line"&gt;(ISBN: 1857027795)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;On December, 1995 the 42-year-old author, editor-in-chief of &lt;em&gt;Elle&lt;/em&gt; magazine in Paris, suffered a massive brain-stem stroke. When he awoke from a coma three weeks later his mind made a rapid recovery but his body lay broken. His condition is …&lt;/p&gt;</summary><content type="html">&lt;img alt="book cover" class="align-left" src="images/diving-bell-and-the-butterfly.jpg" style="width: 150px; height: 243px;" /&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;strong&gt;The Diving-Bell and the Butterfly&lt;/strong&gt; &lt;em&gt;by Jean-Dominique Bauby&lt;/em&gt;&lt;/div&gt;
&lt;div class="line"&gt;(ISBN: 1857027795)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;On December, 1995 the 42-year-old author, editor-in-chief of &lt;em&gt;Elle&lt;/em&gt; magazine in Paris, suffered a massive brain-stem stroke. When he awoke from a coma three weeks later his mind made a rapid recovery but his body lay broken. His condition is known as &amp;quot;locked-in syndrome&amp;quot; and he was paralyzed from head to toe with the exception of (a later) slight movement of the neck and the ability to blink his left eyelid.&lt;/p&gt;
&lt;p&gt;But what an eye! With one blink for yes, two for no, a system for translating blinks to alphabetic characters and a patient transcriber, he narrates this story of holding on to humanity with humour and of an imagination that can still roam free. Do we need to suffer tragedy before we can learn to be courageous and grateful and kind? &lt;em&gt;&amp;quot;Regret for a vanished past, and above all remorse for lost opportunities ... the women we were unable to love, the chances we failed to seize, the moments of happiness we allowed to drift away. Today it seems to me that my whole life was nothing but a string of those small near misses. A race whose result we know beforehand, but in which we fail to bet on the winner.&amp;quot;&lt;/em&gt;&lt;/p&gt;
</content><category term="books"></category></entry><entry><title>Scanner udev rule</title><link href="http://www.circuidipity.com/scanner-udev-rule.html" rel="alternate"></link><published>2017-06-07T14:56:00-04:00</published><updated>2017-06-07T14:56:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-07:/scanner-udev-rule.html</id><summary type="html">&lt;p&gt;&lt;strong&gt;[ Problem ]&lt;/strong&gt; Client error trying to scan to a &lt;strong&gt;Brother MFC-J450DW&lt;/strong&gt; configured as a &lt;a class="reference external" href="http://www.circuidipity.com/network-printer-scanner.html"&gt;network scanner&lt;/a&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;scanimage: open of device net:192.168.... failed: Invalid argument
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Scanner &lt;strong&gt;does&lt;/strong&gt; accept jobs from the server. User belongs to the &lt;tt class="docutils literal"&gt;lp&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;lpadmin&lt;/tt&gt;, and &lt;tt class="docutils literal"&gt;scanner&lt;/tt&gt; groups.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[ Fix! ]&lt;/strong&gt; Set world-writable permission on the scanner bus device …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;[ Problem ]&lt;/strong&gt; Client error trying to scan to a &lt;strong&gt;Brother MFC-J450DW&lt;/strong&gt; configured as a &lt;a class="reference external" href="http://www.circuidipity.com/network-printer-scanner.html"&gt;network scanner&lt;/a&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;scanimage: open of device net:192.168.... failed: Invalid argument
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Scanner &lt;strong&gt;does&lt;/strong&gt; accept jobs from the server. User belongs to the &lt;tt class="docutils literal"&gt;lp&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;lpadmin&lt;/tt&gt;, and &lt;tt class="docutils literal"&gt;scanner&lt;/tt&gt; groups.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[ Fix! ]&lt;/strong&gt; Set world-writable permission on the scanner bus device ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lsusb
Bus &lt;span class="m"&gt;001&lt;/span&gt; Device 006: ID 04f9:02fa Brother Industries, Ltd
$ ls /dev/bus/usb/001/006
crw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; root lp 189, &lt;span class="m"&gt;5&lt;/span&gt; Jun  &lt;span class="m"&gt;6&lt;/span&gt; 17:24 /dev/bus/usb/001/006
$ sudo chmod &lt;span class="m"&gt;666&lt;/span&gt; /dev/bus/usb/001/006
$ ls /dev/bus/usb/001/006
crw-rw-rw- &lt;span class="m"&gt;1&lt;/span&gt; root lp 189, &lt;span class="m"&gt;5&lt;/span&gt; Jun  &lt;span class="m"&gt;6&lt;/span&gt; 17:24 /dev/bus/usb/001/006
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and it works. But when device is unplugged and re-plugged back in again it will be created with the old permissions.&lt;/p&gt;
&lt;p&gt;A more enduring fix is to create a &lt;strong&gt;udev rule&lt;/strong&gt; with desired permissions. First, retrieve the &lt;tt class="docutils literal"&gt;idVendor&lt;/tt&gt; and &lt;tt class="docutils literal"&gt;idDevice&lt;/tt&gt; of the scanner ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lsusb &lt;span class="p"&gt;|&lt;/span&gt; grep Brother
Bus &lt;span class="m"&gt;001&lt;/span&gt; Device 006: ID 04f9:02fa Brother Industries, Ltd
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... then create &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;/lib/udev/rules.d/61-scanner.rules&lt;/span&gt;&lt;/tt&gt; for &lt;strong&gt;04f9:02fa&lt;/strong&gt; with desired permissions ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;SUBSYSTEMS&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;usb&amp;quot;&lt;/span&gt;, ATTRS&lt;span class="o"&gt;{&lt;/span&gt;idVendor&lt;span class="o"&gt;}==&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;04f9&amp;quot;&lt;/span&gt;, ATTRS&lt;span class="o"&gt;{&lt;/span&gt;idProduct&lt;span class="o"&gt;}==&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;02fa&amp;quot;&lt;/span&gt;, &lt;span class="nv"&gt;GROUP&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;lp&amp;quot;&lt;/span&gt;, &lt;span class="nv"&gt;MODE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;0666&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Reload rules ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo udevadm control --reload
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... or simply disconnect and re-connect scanner to test ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls /dev/bus/usb/001/007
crw-rw-rw- &lt;span class="m"&gt;1&lt;/span&gt; root lp 189, &lt;span class="m"&gt;6&lt;/span&gt; Jun  &lt;span class="m"&gt;6&lt;/span&gt; 18:45 /dev/bus/usb/001/007
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
</content><category term="scanner"></category><category term="network"></category><category term="shell"></category><category term="linux"></category></entry><entry><title>Command line torrent server using rTorrent</title><link href="http://www.circuidipity.com/rtorrent.html" rel="alternate"></link><published>2017-06-05T21:40:00-04:00</published><updated>2017-06-18T11:24:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-05:/rtorrent.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/home-server.html"&gt;PROJECT: Home Server #10 .:&lt;/a&gt; A text-based &lt;strong&gt;BitTorrent client&lt;/strong&gt; that - combined with &lt;a class="reference external" href="http://www.circuidipity.com/tmux.html"&gt;tmux&lt;/a&gt; - makes a cool lightweight torrent server.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;I can &lt;tt class="docutils literal"&gt;ssh&lt;/tt&gt; into my home server, start a tmux session and create multiple windows, run &lt;strong&gt;rTorrent&lt;/strong&gt; in a window to start seeding a Linux &lt;tt class="docutils literal"&gt;iso&lt;/tt&gt;, detach from session and …&lt;/p&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/home-server.html"&gt;PROJECT: Home Server #10 .:&lt;/a&gt; A text-based &lt;strong&gt;BitTorrent client&lt;/strong&gt; that - combined with &lt;a class="reference external" href="http://www.circuidipity.com/tmux.html"&gt;tmux&lt;/a&gt; - makes a cool lightweight torrent server.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;I can &lt;tt class="docutils literal"&gt;ssh&lt;/tt&gt; into my home server, start a tmux session and create multiple windows, run &lt;strong&gt;rTorrent&lt;/strong&gt; in a window to start seeding a Linux &lt;tt class="docutils literal"&gt;iso&lt;/tt&gt;, detach from session and server, and return later to find everything in place and the &lt;tt class="docutils literal"&gt;iso&lt;/tt&gt; uploading.&lt;/p&gt;
&lt;div class="section" id="install"&gt;
&lt;h3&gt;0. Install&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install rtorrent
$ mkdir -p ~/rtorrent/config.d
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="start-and-config"&gt;
&lt;h3&gt;1. Start and config&lt;/h3&gt;
&lt;p&gt;Create an rTorrent executable startup script &lt;tt class="docutils literal"&gt;~/rtorrent/start&lt;/tt&gt; with the &lt;a class="reference external" href="https://rtorrent-docs.readthedocs.io/en/latest/cookbook.html#the-rtorrent-command-line"&gt;details provided in the rTorrent cookbook.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Download and save the &lt;a class="reference external" href="https://github.com/rakshasa/rtorrent/wiki/CONFIG-Template"&gt;default configuration template&lt;/a&gt; to &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.rtorrentrc&lt;/span&gt;&lt;/tt&gt;. Open the file and comment out (deactivate) the &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Distributed_hash_table"&gt;dht&lt;/a&gt; and &lt;strong&gt;watch directory&lt;/strong&gt; settings ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="c1"&gt;#dht.mode.set = disable&lt;/span&gt;
&lt;span class="c1"&gt;#protocol.pex.set = no&lt;/span&gt;
&lt;span class="c1"&gt;#trackers.use_udp.set = no&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="c1"&gt;#schedule2 = watch_start, 10, 10, ((load.start, (cat, (cfg.watch), &amp;quot;start/*.torrent&amp;quot;)))&lt;/span&gt;
&lt;span class="c1"&gt;#schedule2 = watch_load, 11, 10, ((load.normal, (cat, (cfg.watch), &amp;quot;load/*.torrent&amp;quot;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Remember to configure &lt;strong&gt;port forwarding&lt;/strong&gt; on the &lt;a class="reference external" href="http://www.circuidipity.com/20141006.html"&gt;home router firewall&lt;/a&gt;  for ports &lt;tt class="docutils literal"&gt;network.port_range.set&lt;/tt&gt; (default &lt;tt class="docutils literal"&gt;50000&lt;/tt&gt;) and &lt;tt class="docutils literal"&gt;dht.port.set&lt;/tt&gt; (configured below).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="config-fragments"&gt;
&lt;h3&gt;2. Config fragments&lt;/h3&gt;
&lt;p&gt;Customize the config by creating some &lt;a class="reference external" href="https://rtorrent-docs.readthedocs.io/en/latest/use-cases.html#load-drop-in-config-fragments"&gt;drop in config fragments&lt;/a&gt; in &lt;tt class="docutils literal"&gt;~/rtorrent/config.d&lt;/tt&gt;. For my setup I create fragments to establish bandwidth quotas, enable dht and require encrypted traffic, and set a directory that rTorrent watches for new torrent files ...&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;bandwidth.rc&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;print&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Global bandwidth .: download_rate = 100 / upload_rate = 20&amp;quot;&lt;/span&gt;
throttle.global_down.max_rate.set_kb &lt;span class="o"&gt;=&lt;/span&gt; 100
throttle.global_up.max_rate.set_kb &lt;span class="o"&gt;=&lt;/span&gt; 20
&lt;/pre&gt;&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;dht.rc&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;print&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;DHT support = auto&amp;quot;&lt;/span&gt;
dht.mode.set &lt;span class="o"&gt;=&lt;/span&gt; auto
dht.port.set &lt;span class="o"&gt;=&lt;/span&gt; 6881
protocol.pex.set &lt;span class="o"&gt;=&lt;/span&gt; yes
trackers.use_udp.set &lt;span class="o"&gt;=&lt;/span&gt; yes
&lt;/pre&gt;&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;encryption.rc&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;print&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Encryption = required&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;encryption&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; require,require_RC4,allow_incoming,try_outgoing
&lt;/pre&gt;&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;watch.rc&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;print&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Watch directory enabled.&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;schedule2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; watch_directory,5,5, &lt;span class="o"&gt;((&lt;/span&gt;load.start, &lt;span class="o"&gt;(&lt;/span&gt;cat, &lt;span class="o"&gt;(&lt;/span&gt;cfg.watch&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;*.torrent&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)))&lt;/span&gt;
&lt;span class="nv"&gt;schedule2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; untied_directory,5,5,stop_untied&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="nv"&gt;schedule2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; tied_directory,5,5,start_tied&lt;span class="o"&gt;=&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="run"&gt;
&lt;h3&gt;3. Run&lt;/h3&gt;
&lt;p&gt;Launch &lt;tt class="docutils literal"&gt;~/rtorrent/start&lt;/tt&gt; and a basic rTorrent setup is now up and running. Check out the &lt;a class="reference external" href="http://getos.org/rtorrent_ref.pdf"&gt;cheatsheet&lt;/a&gt; for navigating around the interface and the &lt;a class="reference external" href="https://rtorrent-docs.readthedocs.io/en/latest/overview.html#"&gt;rTorrent docs&lt;/a&gt; and the torrent client's &lt;a class="reference external" href="https://wiki.archlinux.org/index.php/RTorrent"&gt;entry on the Arch Wiki&lt;/a&gt; for details and ideas for more advanced configs.&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="rtorrent"></category><category term="shell"></category><category term="network"></category><category term="debian"></category><category term="linux"></category></entry><entry><title>Network printer + scanner</title><link href="http://www.circuidipity.com/network-printer-scanner.html" rel="alternate"></link><published>2017-05-27T19:10:00-04:00</published><updated>2017-05-27T19:10:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-05-27:/network-printer-scanner.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/home-server.html"&gt;PROJECT: Home Server #9 .:&lt;/a&gt; Configure a printer + scanner to receive jobs across the local network.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Multi-purpose printer is an &lt;strong&gt;HP Deskjet 2130&lt;/strong&gt; connected to a &lt;strong&gt;home server running Debian&lt;/strong&gt; at IP address &lt;tt class="docutils literal"&gt;192.168.1.88&lt;/tt&gt;.&lt;/p&gt;
&lt;div class="section" id="printer-and-scanner-packages"&gt;
&lt;h3&gt;0. Printer and scanner packages&lt;/h3&gt;
&lt;p&gt;Install a complete set of CUPS (printer …&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/home-server.html"&gt;PROJECT: Home Server #9 .:&lt;/a&gt; Configure a printer + scanner to receive jobs across the local network.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Multi-purpose printer is an &lt;strong&gt;HP Deskjet 2130&lt;/strong&gt; connected to a &lt;strong&gt;home server running Debian&lt;/strong&gt; at IP address &lt;tt class="docutils literal"&gt;192.168.1.88&lt;/tt&gt;.&lt;/p&gt;
&lt;div class="section" id="printer-and-scanner-packages"&gt;
&lt;h3&gt;0. Printer and scanner packages&lt;/h3&gt;
&lt;p&gt;Install a complete set of CUPS (printer) and SANE (scanner) packages on the server and grant (example) username &lt;tt class="docutils literal"&gt;foo&lt;/tt&gt; admin privileges ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# apt install task-print-server&lt;/span&gt;
&lt;span class="c1"&gt;# adduser foo lp&lt;/span&gt;
&lt;span class="c1"&gt;# adduser foo lpadmin&lt;/span&gt;
&lt;span class="c1"&gt;# adduser foo scanner&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="device-drivers-and-firmware"&gt;
&lt;h3&gt;1. Device drivers and firmware&lt;/h3&gt;
&lt;p&gt;Attach the printer to server ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lsusb
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
Bus &lt;span class="m"&gt;002&lt;/span&gt; Device 004: ID 03f0:e111 Hewlett-Packard
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Some printers require additional drivers and firmware from the vendor. Libre software &lt;strong&gt;HPLIP&lt;/strong&gt; adds support for the Deskjet and is packaged for Debian/Ubuntu ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ apt install hplip printer-driver-hpijs
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Link: &lt;a class="reference external" href="http://hplipopensource.com/hplip-web/about.html"&gt;HP Linux Imaging and Printing&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="web-admin-remote-access"&gt;
&lt;h3&gt;2. Web admin remote access&lt;/h3&gt;
&lt;p&gt;Primary configuration of CUPS is done in &lt;tt class="docutils literal"&gt;/etc/cups/cupsd.conf&lt;/tt&gt; and a web interface is provided for administration. Modify default settings that permit only localhost access to the admin panel to allow access to all machines on local network &lt;tt class="docutils literal"&gt;192.168.1.*&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Only listen for connections from the local machine.&lt;/span&gt;
&lt;span class="c1"&gt;#Listen localhost:631&lt;/span&gt;
&lt;span class="c1"&gt;# Listen for connections from local and remote machines.&lt;/span&gt;
Port 631

&lt;span class="c1"&gt;# Show shared printers on the local network.&lt;/span&gt;
Browsing On
BrowseLocalProtocols dnssd

&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Web interface setting...&lt;/span&gt;
WebInterface Yes

&lt;span class="c1"&gt;# Restrict access to the server...&lt;/span&gt;
&amp;lt;Location /&amp;gt;
Order allow,deny
Allow from 192.168.1.*
&amp;lt;/Location&amp;gt;

&lt;span class="c1"&gt;# Restrict access to the admin pages...&lt;/span&gt;
&amp;lt;Location /admin&amp;gt;
Order allow,deny
Allow from 192.168.1.*
&amp;lt;/Location&amp;gt;

&lt;span class="c1"&gt;# Restrict access to configuration files...&lt;/span&gt;
&amp;lt;Location /admin/conf&amp;gt;
AuthType Default
Require user @SYSTEM
Order allow,deny
Allow from 192.168.1.*
&amp;lt;/Location&amp;gt;

&lt;span class="c1"&gt;# Restrict access to log files...&lt;/span&gt;
&amp;lt;Location /admin/log&amp;gt;
AuthType Default
Require user @SYSTEM
Order allow,deny
Allow from 192.168.1.*
&amp;lt;/Location&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Restart CUPS ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# systemctl restart cups.service&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt; Server at address &lt;tt class="docutils literal"&gt;192.168.1.88&lt;/tt&gt; has admin functions available via browser at &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;https://192.168.1.88:631/admin&lt;/span&gt;&lt;/tt&gt; (Firefox warns &lt;em&gt;Your connection is not secure&lt;/em&gt; on first connect; add an exception for the CUPS ssl certificate).&lt;/p&gt;
&lt;img alt="CUPS Admin" class="align-center" src="images/cups-admin.png" style="width: 900px; height: 304px;" /&gt;
&lt;/div&gt;
&lt;div class="section" id="add-the-printer"&gt;
&lt;h3&gt;3. Add the printer&lt;/h3&gt;
&lt;p&gt;Select &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Administration-&amp;gt;Printers-&amp;gt;Add&lt;/span&gt; Printer&lt;/tt&gt; and login with the username assigned previously to the &lt;tt class="docutils literal"&gt;lpadmin&lt;/tt&gt; group.&lt;/p&gt;
&lt;img alt="CUPS local printer" class="align-center" src="images/cups-local-printer.png" style="width: 900px; height: 540px;" /&gt;
&lt;img alt="CUPS add printer" class="align-center" src="images/cups-add-printer.png" style="width: 900px; height: 450px;" /&gt;
&lt;img alt="CUPS printer model" class="align-center" src="images/cups-printer-model.png" style="width: 900px; height: 600px;" /&gt;
&lt;img alt="CUPS printer" class="align-center" src="images/cups-printer.png" style="width: 900px; height: 500px;" /&gt;
&lt;p&gt;Test the configuration by selecting &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Maintenance-&amp;gt;Print&lt;/span&gt; Test Page&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Printer settings are saved to &lt;tt class="docutils literal"&gt;/etc/cups/printers.conf&lt;/tt&gt;. On the command line, check printer status with &lt;tt class="docutils literal"&gt;lpstat&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lpstat -t
scheduler is running
no system default destination
device &lt;span class="k"&gt;for&lt;/span&gt; HP_DeskJet_2130_series: hp:/usb/DeskJet_2130_series?serial&lt;span class="o"&gt;=&lt;/span&gt;CN674...
HP_DeskJet_2130_series accepting requests since Sat &lt;span class="m"&gt;27&lt;/span&gt; May &lt;span class="m"&gt;2017&lt;/span&gt; 11:16:37 AM EDT
printer HP_DeskJet_2130_series is idle.  enabled since Sat &lt;span class="m"&gt;27&lt;/span&gt; May &lt;span class="m"&gt;2017&lt;/span&gt; 11:16:37 AM EDT
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="access-printer-from-a-linux-client"&gt;
&lt;h3&gt;4. Access printer from a Linux client&lt;/h3&gt;
&lt;p&gt;Client machines can dispense with running a local CUPS server and its helper tools. To connect directly with the network printer, download ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# apt install cups-client&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Create &lt;tt class="docutils literal"&gt;client.conf&lt;/tt&gt; in &lt;tt class="docutils literal"&gt;$HOME&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir ~/.cups
$ touch ~/.cups/client.conf
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and add the address of the server hosting the scanner to the file ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ServerName 192.168.1.88
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Alternative:&lt;/strong&gt; If the Linux client machine regularly connects to printers on different networks it might prove convenient to download a more complete suite of CUPS packages - &lt;tt class="docutils literal"&gt;apt install cups&lt;/tt&gt; - and add the network printer via the web interface address &lt;tt class="docutils literal"&gt;localhost:631&lt;/tt&gt; or via the native printer config utility included with some desktop environments.&lt;/p&gt;
&lt;p&gt;Link: &lt;a class="reference external" href="https://wiki.debian.org/PrintQueuesCUPS#Printing_Without_a_Local_CUPS_Server"&gt;Printing Without a Local CUPS Server&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="add-the-scanner"&gt;
&lt;h3&gt;5. Add the scanner&lt;/h3&gt;
&lt;p&gt;Detect attached device on the server using &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;sane-find-scanner&lt;/span&gt;&lt;/tt&gt; and &lt;tt class="docutils literal"&gt;scanimage&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sane-find-scanner
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
found USB scanner &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;vendor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0x03f0 &lt;span class="o"&gt;[&lt;/span&gt;HP&lt;span class="o"&gt;]&lt;/span&gt;, &lt;span class="nv"&gt;product&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0xe111 &lt;span class="o"&gt;[&lt;/span&gt;DeskJet &lt;span class="m"&gt;2130&lt;/span&gt; series&lt;span class="o"&gt;])&lt;/span&gt; at libusb:002:004
$ scanimage -L
device &lt;span class="sb"&gt;`&lt;/span&gt;hpaio:/usb/DeskJet_2130_series?serial&lt;span class="o"&gt;=&lt;/span&gt;CN674...&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; is a Hewlett-Packard DeskJet_2130_series all-in-one
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Run a test ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ scanimage &amp;gt; test.ppm
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and retrieve the (grayscale) image from the server and verify the scanner is working on the local server connection (before enabling remote access to client machines).&lt;/p&gt;
&lt;p&gt;Modify &lt;tt class="docutils literal"&gt;/etc/sane.d/saned.conf&lt;/tt&gt; to share the scanner over the local network ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;## Access list&lt;/span&gt;
192.168.1.0/24
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Setup SANE in &lt;strong&gt;systemd&lt;/strong&gt; and check status ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# systemctl enable saned.socket&lt;/span&gt;
&lt;span class="c1"&gt;# systemctl start saned.socket&lt;/span&gt;
$ systemctl status saned.socket
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="access-scanner-from-a-linux-client"&gt;
&lt;h3&gt;6. Access scanner from a Linux client&lt;/h3&gt;
&lt;p&gt;Install scanner tools on the client machine ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# apt install sane-utils&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Modify &lt;tt class="docutils literal"&gt;/etc/sane.d/net.conf&lt;/tt&gt; to point the client towards the address of the server hosting the scanner ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;connect_timeout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 60
192.168.1.88
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Verify the remote scanner is visible to the client ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ scanimage -L
device &lt;span class="sb"&gt;`&lt;/span&gt;net:192.168.1.88:hpaio:/usb/DeskJet_2130_series?serial&lt;span class="o"&gt;=&lt;/span&gt;CN674...&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; is a Hewlett-Packard DeskJet_2130_series all-in-one
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; If the client fails to find the remote scanner, reboot the server and try again.&lt;/p&gt;
&lt;p&gt;Run a test ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ scanimage &amp;gt; test2.ppm
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For a simple, graphical scanner program give &lt;strong&gt;simple-scan&lt;/strong&gt; a try.&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="printer"></category><category term="scanner"></category><category term="network"></category><category term="debian"></category><category term="linux"></category></entry></feed>