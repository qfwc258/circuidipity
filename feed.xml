<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Circuidipity</title><link href="http://www.circuidipity.com/" rel="alternate"></link><link href="http://www.circuidipity.com/feed.xml" rel="self"></link><id>http://www.circuidipity.com/</id><updated>2017-07-16T18:35:00-04:00</updated><entry><title>Virtualbox on Debian Stretch</title><link href="http://www.circuidipity.com/virtualbox-debian-stretch.html" rel="alternate"></link><published>2017-07-15T14:21:00-04:00</published><updated>2017-07-15T14:21:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-07-15:/virtualbox-debian-stretch.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="https://www.virtualbox.org/"&gt;Virtualbox&lt;/a&gt; is virtualization software that allows a Linux user to host multiple guest operating systems as &lt;strong&gt;virtual machines (VMs)&lt;/strong&gt;. It is a cool tool for playing with different Linux distros and experimenting with configurations.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;In this HOWTO I install Virtualbox on a &lt;a class="reference external" href="http://www.circuidipity.com/tag-debian.html"&gt;Debian&lt;/a&gt; &lt;tt class="docutils literal"&gt;stable/stretch&lt;/tt&gt; HOST and create …&lt;/p&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="https://www.virtualbox.org/"&gt;Virtualbox&lt;/a&gt; is virtualization software that allows a Linux user to host multiple guest operating systems as &lt;strong&gt;virtual machines (VMs)&lt;/strong&gt;. It is a cool tool for playing with different Linux distros and experimenting with configurations.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;In this HOWTO I install Virtualbox on a &lt;a class="reference external" href="http://www.circuidipity.com/tag-debian.html"&gt;Debian&lt;/a&gt; &lt;tt class="docutils literal"&gt;stable/stretch&lt;/tt&gt; HOST and create a Debian GUEST virtual machine.&lt;/p&gt;
&lt;div class="section" id="install-virtualbox-on-host"&gt;
&lt;h3&gt;0. Install VirtualBox on HOST&lt;/h3&gt;
&lt;p&gt;Kernel modules for Virtualbox are built via &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Dynamic_Kernel_Module_Support"&gt;Dynamic Kernel Module Support (DKMS)&lt;/a&gt;. After installing Virtualbox the &lt;tt class="docutils literal"&gt;vbox&lt;/tt&gt; modules should be auto-built and -loaded. Install a few tools ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install dkms module-assistant linux-headers-&lt;span class="k"&gt;$(&lt;/span&gt;uname -r&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Virtualbox packages have been removed from the latest Debian stable release (still available in unstable/sid). I choose to retrieve Virtualbox directly from Oracle and their third-party Debian package repository.&lt;/p&gt;
&lt;p&gt;Create the &lt;tt class="docutils literal"&gt;virtualbox.list&lt;/tt&gt; file in &lt;tt class="docutils literal"&gt;/etc/apt/sources.list.d&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo sh -c &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;deb http://download.virtualbox.org/virtualbox/debian stretch contrib&amp;quot;&lt;/span&gt; &amp;gt; /etc/apt/sources.list.d/virtualbox.list
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add Oracle's Virtualbox public key ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ wget https://www.virtualbox.org/download/oracle_vbox_2016.asc
$ sudo mv oracle_vbox_2016.asc /etc/apt/trusted.gpg.d
$ apt-key list
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
/etc/apt/trusted.gpg.d/oracle_vbox_2016.asc
-------------------------------------------
pub   rsa4096 2016-04-22 &lt;span class="o"&gt;[&lt;/span&gt;SC&lt;span class="o"&gt;]&lt;/span&gt;
B9F8 D658 297A F3EF C18D  5CDF A2F6 83C5 &lt;span class="m"&gt;2980&lt;/span&gt; AECF
uid           &lt;span class="o"&gt;[&lt;/span&gt; unknown&lt;span class="o"&gt;]&lt;/span&gt; Oracle Corporation &lt;span class="o"&gt;(&lt;/span&gt;VirtualBox archive signing key&lt;span class="o"&gt;)&lt;/span&gt; &amp;lt;info@virtualbox.org&amp;gt;
sub   rsa4096 2016-04-22 &lt;span class="o"&gt;[&lt;/span&gt;E&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Install Virtualbox ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo apt install virtualbox-5.1
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add my USERNAME to the &lt;tt class="docutils literal"&gt;vboxusers&lt;/tt&gt; group ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo adduser USERNAME vboxusers
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="create-a-debian-guest-vm"&gt;
&lt;h3&gt;1. Create a Debian GUEST VM&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Default Machine Folder&lt;/strong&gt; where Virtual Machine (VM) images are stored is &lt;tt class="docutils literal"&gt;~/Virtualbox VMs&lt;/tt&gt; (this can be modified in &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;File-&amp;gt;Preferences-&amp;gt;General&lt;/span&gt;&lt;/tt&gt;).&lt;/p&gt;
&lt;p&gt;See the &lt;a class="reference external" href="http://www.virtualbox.org/manual/UserManual.html"&gt;User Manual&lt;/a&gt; for creating a GUEST VM. I use the Debian &lt;tt class="docutils literal"&gt;netinst&lt;/tt&gt; installer to create a new virtual machine with a &lt;a class="reference external" href="http://www.circuidipity.com/minimal-debian.html"&gt;minimal system configuration&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="guest-additions"&gt;
&lt;h3&gt;2. Guest additions&lt;/h3&gt;
&lt;p&gt;Enable extra features such as the ability to tweak display settings and add a shared folder between HOST and GUEST machines.&lt;/p&gt;
&lt;p&gt;Launch the new Debian GUEST and install ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# apt update &amp;amp;&amp;amp; apt install build-essential module-assistant linux-headers-$(uname -r) dkms&lt;/span&gt;
&lt;span class="c1"&gt;# m-a prepare&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Download the &lt;tt class="docutils literal"&gt;VBoxGuestAdditions_VERSION.iso&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ wget -c http://download.virtualbox.org/virtualbox/5.1.22/VBoxGuestAdditions_5.1.22.iso
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the GUEST window menu, select &lt;tt class="docutils literal"&gt;Devices &amp;gt; Insert Guest Additions CD image&lt;/tt&gt; to make the image accessible to the VM. Inside the VM: &lt;strong&gt;mount&lt;/strong&gt; the image; &lt;strong&gt;run&lt;/strong&gt; the install script; &lt;strong&gt;add&lt;/strong&gt; user to the &lt;tt class="docutils literal"&gt;vboxsf&lt;/tt&gt; group; &lt;strong&gt;reboot&lt;/strong&gt; the VM ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# mount /media/cdrom&lt;/span&gt;
&lt;span class="c1"&gt;# sh /media/cdrom/VBoxLinuxAdditions.run&lt;/span&gt;
&lt;span class="c1"&gt;# adduser USERNAME vboxsf&lt;/span&gt;
&lt;span class="c1"&gt;# reboot&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If the virtualbox modules need to be rebuilt for any reason for the running kernel ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ uname -r &lt;span class="p"&gt;|&lt;/span&gt; sudo xargs -n1 /usr/lib/dkms/dkms_autoinstaller start
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="display"&gt;
&lt;h3&gt;3. Display&lt;/h3&gt;
&lt;p&gt;Tweak display settings by going to the Virtualbox &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Machine-&amp;gt;Settings...-&amp;gt;Display&lt;/span&gt;&lt;/tt&gt; setting and move the slider to add more video memory and enable 3D acceleration.&lt;/p&gt;
&lt;img alt="Display Settings" class="align-center" src="images/20121207-display.png" style="width: 662px; height: 502px;" /&gt;
&lt;p&gt;With VirtualBox guest additions the display and resolution can be changed when running a graphical environment. If the GUEST VM does not use a graphical login manager to launch its desktop, then modify &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xinitrc&lt;/span&gt;&lt;/tt&gt; to start &lt;strong&gt;VBoxClient&lt;/strong&gt; services ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;VBoxClient --clipboard &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
VBoxClient --display &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
VBoxClient --seamless &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="console"&gt;
&lt;h3&gt;4. Console&lt;/h3&gt;
&lt;p&gt;Debian GUEST in console mode defaults to a small 80x40 window. Resize by rebooting the GUEST and configuring &lt;strong&gt;Grub&lt;/strong&gt; ...&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Grub boot screen: hit &lt;tt class="docutils literal"&gt;c&lt;/tt&gt; to enter command mode&lt;/li&gt;
&lt;li&gt;At the prompt &lt;tt class="docutils literal"&gt;grub&amp;gt;&lt;/tt&gt;: run &lt;tt class="docutils literal"&gt;vbeinfo&lt;/tt&gt; to display supported resolutions (example: &lt;tt class="docutils literal"&gt;1152x864&lt;/tt&gt;)&lt;/li&gt;
&lt;li&gt;&lt;dl class="first docutils"&gt;
&lt;dt&gt;Modify the config &lt;tt class="docutils literal"&gt;/etc/default/grub&lt;/tt&gt;: add ...&lt;/dt&gt;
&lt;dd&gt;&lt;ul class="first last"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;GRUB_CMDLINE_LINUX_DEFAULT=&amp;quot;nomodeset&amp;quot;&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;GRUB_GFXMODE=1152x864&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;GRUB_GFXPAYLOAD_LINUX=keep&lt;/tt&gt; (&lt;a class="reference external" href="https://askubuntu.com/a/887785"&gt;Helpful!&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;li&gt;Save changes: run &lt;tt class="docutils literal"&gt;sudo &lt;span class="pre"&gt;update-grub&lt;/span&gt;&lt;/tt&gt; and reboot&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="shared-folder"&gt;
&lt;h3&gt;5. Shared folder&lt;/h3&gt;
&lt;p&gt;Create a shared folder on HOST. Make it accessible to GUEST by going to &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Machine-&amp;gt;Settings...-&amp;gt;Shared&lt;/span&gt; Folders&lt;/tt&gt; and click &lt;tt class="docutils literal"&gt;Add Shared Folder&lt;/tt&gt; and &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Auto-Mount&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;img alt="Shared Folder Settings" class="align-center" src="images/20121207-shared-folders.png" style="width: 662px; height: 502px;" /&gt;
&lt;/div&gt;
&lt;div class="section" id="ssh-from-host-to-guest"&gt;
&lt;h3&gt;6. SSH from HOST to GUEST&lt;/h3&gt;
&lt;p&gt;&lt;a class="reference external" href="http://christophermaier.name/blog/2010/09/01/host-only-networking-with-virtualbox"&gt;Host-only networking with Virtualbox&lt;/a&gt; was a big help getting this properly configured.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Scenario:&lt;/strong&gt; I want to SSH from my HOST to GUEST. Default configuration supplies GUEST with a NAT interface for internet access but no HOST&amp;lt;-&amp;gt;GUEST connectivity. A solution for local access is creating a &lt;strong&gt;host-only adapter&lt;/strong&gt;.&lt;/p&gt;
&lt;div class="section" id="host"&gt;
&lt;h4&gt;HOST&lt;/h4&gt;
&lt;p&gt;Navigate to Virtualbox's &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;File-&amp;gt;Preferences-&amp;gt;Network&lt;/span&gt;&lt;/tt&gt;, select &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Host-only&lt;/span&gt; Networks&lt;/tt&gt;, click &lt;tt class="docutils literal"&gt;Adds new &lt;span class="pre"&gt;host-only&lt;/span&gt; network&lt;/tt&gt; to create &lt;tt class="docutils literal"&gt;vboxnet0&lt;/tt&gt;. Default setup is interface address &lt;tt class="docutils literal"&gt;192.168.56.1&lt;/tt&gt; with DHCP enabled.&lt;/p&gt;
&lt;p&gt;Select the GUEST VM and in &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Machine-&amp;gt;Settings-&amp;gt;Network&lt;/span&gt;&lt;/tt&gt; click on &lt;tt class="docutils literal"&gt;Adapter 2&lt;/tt&gt;, enable network adapter attached to &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Host-only&lt;/span&gt; Adapter&lt;/tt&gt;, and select &lt;tt class="docutils literal"&gt;vboxnet0&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="guest"&gt;
&lt;h4&gt;GUEST&lt;/h4&gt;
&lt;p&gt;Boot the VM and confirm the new interface has been created. Add the interface to &lt;tt class="docutils literal"&gt;/etc/network/interfaces&lt;/tt&gt; (example: &lt;tt class="docutils literal"&gt;enp0s8&lt;/tt&gt;) ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Host-only interface&lt;/span&gt;
auto enp0s8
iface enp0s8 inet dhcp
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Install the SSH server ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install openssh-server
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Reboot GUEST. The second interface has been assigned address &lt;tt class="docutils literal"&gt;192.168.56.101&lt;/tt&gt; by DHCP and can now be accessed from HOST via SSH.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Optional:&lt;/strong&gt; Assign GUEST a static address outside the range of the Virtualbox DHCP server (101-254 by default) ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Host-only interface&lt;/span&gt;
auto enp0s8
iface enp0s8 inet static
address 192.168.56.50
netmask 255.255.255.0
network 192.168.56.0
broadcast 192.168.56.255
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and modify &lt;tt class="docutils literal"&gt;/etc/hosts&lt;/tt&gt; on HOST by adding the VM static address.&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="virtualbox"></category><category term="debian"></category><category term="linux"></category></entry><entry><title>Install (almost) the same list of Debian packages on multiple machines</title><link href="http://www.circuidipity.com/debian-package-list.html" rel="alternate"></link><published>2017-07-14T12:37:00-04:00</published><updated>2017-07-16T18:35:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-07-14:/debian-package-list.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/the-lifecycle-of-debian-objects.html"&gt;PROJECT: The Lifecycle of Debian Objects .:&lt;/a&gt; &lt;strong&gt;Scenario:&lt;/strong&gt; I have a whole bunch of packages installed on &lt;strong&gt;Machine A&lt;/strong&gt; and I want to replicate that package selection on &lt;strong&gt;Machine B&lt;/strong&gt;.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Machine A serves as the original source of the list of packages.&lt;/p&gt;
&lt;div class="section" id="make"&gt;
&lt;h3&gt;0. Make&lt;/h3&gt;
&lt;p&gt;Generate the list ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dpkg --get-selections …&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/the-lifecycle-of-debian-objects.html"&gt;PROJECT: The Lifecycle of Debian Objects .:&lt;/a&gt; &lt;strong&gt;Scenario:&lt;/strong&gt; I have a whole bunch of packages installed on &lt;strong&gt;Machine A&lt;/strong&gt; and I want to replicate that package selection on &lt;strong&gt;Machine B&lt;/strong&gt;.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Machine A serves as the original source of the list of packages.&lt;/p&gt;
&lt;div class="section" id="make"&gt;
&lt;h3&gt;0. Make&lt;/h3&gt;
&lt;p&gt;Generate the list ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dpkg --get-selections &amp;gt; pkg-list
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;pkg-list&lt;/span&gt;&lt;/tt&gt; file now contains the list of installed Debian packages on Machine A. However I want to make a few changes (hence the &amp;quot;almost&amp;quot; in the title) to the list.&lt;/p&gt;
&lt;p&gt;Delete entries for packages that have been installed then removed (marked as &lt;tt class="docutils literal"&gt;deinstall&lt;/tt&gt;) ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sed -i &lt;span class="s1"&gt;&amp;#39;/deinstall/d&amp;#39;&lt;/span&gt; pkg-list
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I also delete entries for packages that I built myself (identified using &lt;a class="reference external" href="https://tracker.debian.org/pkg/apt-show-versions"&gt;apt-show-versions&lt;/a&gt;) and are not available in the Debian package archives ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;ARRAY&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;apt-show-versions &lt;span class="p"&gt;|&lt;/span&gt; grep -v &lt;span class="s2"&gt;&amp;quot;stretch&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk -F: &lt;span class="s1"&gt;&amp;#39;{print $1}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; package in &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[@]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;do&lt;/span&gt;
    sed -i &lt;span class="s2"&gt;&amp;quot;/&lt;/span&gt;&lt;span class="nv"&gt;$package&lt;/span&gt;&lt;span class="s2"&gt;/d&amp;quot;&lt;/span&gt; pkg-list
&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I made the &lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/generatePkgList"&gt;generatePkgList&lt;/a&gt; shell script to create modified package lists.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="install"&gt;
&lt;h3&gt;1. Install&lt;/h3&gt;
&lt;p&gt;Copy &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;pkg-list&lt;/span&gt;&lt;/tt&gt; to Machine B and update its &lt;tt class="docutils literal"&gt;dpkg&lt;/tt&gt; database of known packages ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# avail=`mktemp`&lt;/span&gt;
&lt;span class="c1"&gt;# apt-cache dumpavail &amp;gt; &amp;quot;$avail&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# dpkg --merge-avail &amp;quot;$avail&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# rm -f &amp;quot;$avail&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Update the &lt;tt class="docutils literal"&gt;dpkg&lt;/tt&gt; selections ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# dpkg --set-selections &amp;lt; pkg-list&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Use &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;apt-get&lt;/span&gt;&lt;/tt&gt; to install the selected packages ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# apt-get dselect-upgrade&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Link: &lt;a class="reference external" href="https://debian-handbook.info/browse/stable/sect.apt-get.html"&gt;Debian Administrator's Handbook - 6.2. aptitude, apt-get, and apt Commands&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="debian"></category><category term="linux"></category><category term="shell"></category><category term="programming"></category></entry><entry><title>Compile and install programs in $HOME</title><link href="http://www.circuidipity.com/compile-install-homedir.html" rel="alternate"></link><published>2017-07-10T16:00:00-04:00</published><updated>2017-07-16T18:35:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-07-10:/compile-install-homedir.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/the-lifecycle-of-debian-objects.html"&gt;PROJECT: The Lifecycle of Debian Objects .:&lt;/a&gt; Debian has extensive (50,000+) package archives but sometimes I want &lt;strong&gt;that one thing&lt;/strong&gt; they do not! Or maybe I want to re-compile the source code of a program with different options.&lt;/p&gt;
&lt;p&gt;I can make a clean separation between &lt;strong&gt;a)&lt;/strong&gt; programs installed by Debian …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/the-lifecycle-of-debian-objects.html"&gt;PROJECT: The Lifecycle of Debian Objects .:&lt;/a&gt; Debian has extensive (50,000+) package archives but sometimes I want &lt;strong&gt;that one thing&lt;/strong&gt; they do not! Or maybe I want to re-compile the source code of a program with different options.&lt;/p&gt;
&lt;p&gt;I can make a clean separation between &lt;strong&gt;a)&lt;/strong&gt; programs installed by Debian packages; and &lt;strong&gt;b)&lt;/strong&gt; programs installed by myself; by compiling and installing programs as a &lt;strong&gt;non-root user&lt;/strong&gt; in my home directory.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/davidbrazdil/volnoti"&gt;Volnoti&lt;/a&gt; is a lightweight volume notification tool &lt;a class="reference external" href="http://www.circuidipity.com/i3-tiling-window-manager.html"&gt;I like to use with i3&lt;/a&gt; and there is no Debian package available.&lt;/p&gt;
&lt;div class="section" id="start"&gt;
&lt;h3&gt;0. Start&lt;/h3&gt;
&lt;p&gt;Download the program source code. Source for &lt;tt class="docutils literal"&gt;volnoti&lt;/tt&gt; is hosted on GitHub ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git clone git://github.com/davidbrazdil/volnoti.git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Check the README for any build dependencies and install. All the &lt;tt class="docutils literal"&gt;volnoti&lt;/tt&gt; requirements can be satisfied with Debian packages ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install libdbus-glib-1-dev libgtk2.0-dev libgdk-pixbuf2.0-dev autoconf automake
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Create the &lt;strong&gt;destination directory&lt;/strong&gt; for the program contents. By creating a program-specific directory I can easily remove a program by simply deleting the directory ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir -p ~/opt/volnoti
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pre-compile"&gt;
&lt;h3&gt;1. Pre-compile&lt;/h3&gt;
&lt;p&gt;&lt;a class="reference external" href="http://ubuntuforums.org/showthread.php?t=2215264&amp;amp;s=7aa2dfa8b89411472598e737c38f1475&amp;amp;p=12978792#post12978792"&gt;Apply any necessary fixes&lt;/a&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; volnoti
$ ./prepare.sh
$ &lt;span class="nb"&gt;cd&lt;/span&gt; src
$ rm value-client-stub.h &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make value-client-stub.h
$ rm value-daemon-stub.h &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make value-daemon-stub.h
$ &lt;span class="nb"&gt;cd&lt;/span&gt; ..
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="compile-and-install"&gt;
&lt;h3&gt;2. Compile and install&lt;/h3&gt;
&lt;p&gt;Compile and install program to the custom destination directory ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ./configure --prefix&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;/opt/volnoti
$ make
$ make install
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add the executable directory (&lt;tt class="docutils literal"&gt;$HOME/opt/volnoti/bin&lt;/tt&gt;) to the PATH in &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.profile"&gt;~/.profile&lt;/a&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# set PATH so it includes programs installed in user&amp;#39;s home directory&lt;/span&gt;
&lt;span class="c1"&gt;# volnoti - volume notification daemon&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -d &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;&lt;span class="s2"&gt;/opt/volnoti/bin&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;&lt;span class="s2"&gt;/opt/volnoti/bin:&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="run-program"&gt;
&lt;h3&gt;3. Run program&lt;/h3&gt;
&lt;p&gt;Start the &lt;tt class="docutils literal"&gt;volnoti&lt;/tt&gt; daemon ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ volnoti
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Configure daemon to auto-start by adding it to &lt;a class="reference external" href="http://www.circuidipity.com/xinitrc.html"&gt;~/.xinitrc&lt;/a&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;volnoti -t &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Links: &lt;a class="reference external" href="http://www.circuidipity.com/pavolume.html"&gt;Volume control and notification&lt;/a&gt; and &lt;a class="reference external" href="https://wiki.debian.org/DontBreakDebian"&gt;DontBreakDebian&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="shell"></category><category term="linux"></category></entry><entry><title>Lightweight and a delight: i3 tiling window manager</title><link href="http://www.circuidipity.com/i3-tiling-window-manager.html" rel="alternate"></link><published>2017-07-04T09:17:00-04:00</published><updated>2017-07-16T18:35:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-07-04:/i3-tiling-window-manager.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/the-lifecycle-of-debian-objects.html"&gt;PROJECT: The Lifecycle of Debian Objects .:&lt;/a&gt; As a former &lt;strong&gt;Fluxbox&lt;/strong&gt; and &lt;strong&gt;Openbox&lt;/strong&gt; user I can understand the love for a lightweight, minimal window manager where I can &amp;quot;paint&amp;quot; my applications across the screen. I was curious about &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Tiling_window_manager"&gt;tiling window managers&lt;/a&gt; but never quite grokked the advantage from screenshots. Seeing consoles …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/the-lifecycle-of-debian-objects.html"&gt;PROJECT: The Lifecycle of Debian Objects .:&lt;/a&gt; As a former &lt;strong&gt;Fluxbox&lt;/strong&gt; and &lt;strong&gt;Openbox&lt;/strong&gt; user I can understand the love for a lightweight, minimal window manager where I can &amp;quot;paint&amp;quot; my applications across the screen. I was curious about &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Tiling_window_manager"&gt;tiling window managers&lt;/a&gt; but never quite grokked the advantage from screenshots. Seeing consoles arranged in a grid made me think &lt;a class="reference external" href="http://www.circuidipity.com/tmux.html"&gt;tmux&lt;/a&gt; a better choice for that task, and why would I want to watch a video in a reduced square in the corner of a screen?&lt;/p&gt;
&lt;p&gt;But then I tried &lt;a class="reference external" href="https://i3wm.org/"&gt;i3&lt;/a&gt; and found my new desktop ...&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;low memory requirements and &lt;a class="reference external" href="http://www.circuidipity.com/xinitrc.html"&gt;startx to X&lt;/a&gt;  almost instantaneous on &lt;a class="reference external" href="http://www.circuidipity.com/jessiebook-to-stretchbook.html"&gt;Stretchbook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;loads sensible defaults and - thanks to the excellent &lt;a class="reference external" href="https://i3wm.org/docs/userguide.html"&gt;User's Guide&lt;/a&gt; - easy to customize via text files&lt;/li&gt;
&lt;li&gt;toggle between &lt;strong&gt;tiled&lt;/strong&gt;, &lt;strong&gt;tabbed&lt;/strong&gt; (my default), &lt;strong&gt;stacked&lt;/strong&gt;, and &lt;strong&gt;floating&lt;/strong&gt; mode (see User's Guide)&lt;/li&gt;
&lt;li&gt;even if you rarely use applications in a tiled arrangement, i3 handles maximized windows, desktops, and multiple displays extremely well via keyboard&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Still want to use a mouse here and here? No problem! Provides a &lt;strong&gt;statusbar&lt;/strong&gt;, but you can swap it out for an &lt;a class="reference external" href="https://wiki.archlinux.org/index.php/I3#i3bar_alternatives"&gt;alternative&lt;/a&gt; or run none at all.&lt;/p&gt;
&lt;p&gt;Install and configure on Debian ...&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Starting out I find myself mostly happy with the &lt;a class="reference external" href="https://i3wm.org/docs/userguide.html#_default_keybindings"&gt;default keybindings&lt;/a&gt; and behaviour; making only a few adjustments and additions to &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.config/i3/config.base"&gt;my configuration&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="install"&gt;
&lt;h3&gt;Install&lt;/h3&gt;
&lt;p&gt;Download the &lt;strong&gt;i3 metapackage&lt;/strong&gt; and a few desktop utilities ...&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;dunst&lt;/strong&gt; - lightweight notification daemon&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;volnoti&lt;/strong&gt; - volume notification (&lt;a class="reference external" href="http://www.circuidipity.com/pavolume.html#volnoti"&gt;built separately&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;rofi&lt;/strong&gt; - dynamic application launcher + window selector&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nm-applet&lt;/strong&gt; - network monitor and control (provided by &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;network-manager-gnome&lt;/span&gt;&lt;/tt&gt;)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;scrot&lt;/strong&gt; - screenshots&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;lximage-qt&lt;/strong&gt; - image viewer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;urxvt&lt;/strong&gt; - terminal&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install i3 dunst rofi network-manager-gnome scrot lximage-qt rxvt-unicode-256color
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="countdown-to-launch"&gt;
&lt;h3&gt;Countdown to launch&lt;/h3&gt;
&lt;p&gt;In my &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xinitrc"&gt;~/.xinitrc&lt;/a&gt; I add a few tasks before launching the window manager.&lt;/p&gt;
&lt;p&gt;Load config parameters for X client applications, disable screen blanking, and empty the trash ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Config parameters for X client applications&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt; -f ~/.Xresources &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; xrdb -merge ~/.Xresources

&lt;span class="c1"&gt;# Disable DPMS and turn off screen blanking&lt;/span&gt;
xset s off -dpms

&lt;span class="c1"&gt;# Janitor&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt; -d ~/.local/share/Trash &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf ~/.local/share/Trash/*
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Start applications ...&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;dldsply&lt;/strong&gt; - detect and - if present - configure a second display&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;i3wm_conf&lt;/strong&gt; - &lt;a class="reference external" href="http://www.circuidipity.com/i3-tiling-window-manager.html#conditionals"&gt;build a config at runtime for i3wm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;keyboardconf&lt;/strong&gt; - bind commands to keys and load key mappings&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nm-applet&lt;/strong&gt; - network-manager utility&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;volnoti&lt;/strong&gt; - volume notification&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;urxvt&lt;/strong&gt; - terminal&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Applications&lt;/span&gt;
~/bin/dldsply -r &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
~/bin/i3wm_conf &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
~/bin/keyboardconf &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
sleep 2
&lt;span class="o"&gt;[&lt;/span&gt; -x /usr/bin/nm-applet &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; nm-applet &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
volnoti -t &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
urxvt &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Launch i3!&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Start window manager&lt;/span&gt;
&lt;span class="nb"&gt;exec&lt;/span&gt; i3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Source for startup scripts: homebin/&lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/dldsply"&gt;dldsply&lt;/a&gt;; homebin/&lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/i3wm_conf"&gt;i3wm_conf&lt;/a&gt;; and homebin/&lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/keyboardconf"&gt;keyboardconf&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="configuration"&gt;
&lt;h3&gt;Configuration&lt;/h3&gt;
&lt;p&gt;Window manager configuration file is &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.config/i3/config&lt;/span&gt;&lt;/tt&gt;, which i3 offers to generate at first launch. A few changes that I make from the i3 defaults ...&lt;/p&gt;
&lt;div class="section" id="windows-and-workspaces"&gt;
&lt;h4&gt;Windows and Workspaces&lt;/h4&gt;
&lt;p&gt;Remove the default tabs from windows and replace them with thin coloured bars by reducing window title font size to zero ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;font pango:monospace 0
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and set colours for windows ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Colours&lt;/span&gt;
&lt;span class="c1"&gt;# * class                 border  backgrd text    indicator&lt;/span&gt;
client.focused            &lt;span class="c1"&gt;#3daee9 #3daee9 #ffffff #2e9ef4&lt;/span&gt;
client.focused_inactive   &lt;span class="c1"&gt;#1cdc9a #1cdc9a #ffffff #484e50&lt;/span&gt;
client.unfocused          &lt;span class="c1"&gt;#4d4d4d #4d4d4d #ffffff #292d2e&lt;/span&gt;
client.urgent             &lt;span class="c1"&gt;#2f343a #900000 #ffffff #900000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Workspace defaults to a tabbed layout for windows, with hotkeys for toggling between different layouts ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Layout mode&lt;/span&gt;
workspace_layout tabbed

&lt;span class="c1"&gt;# Change layout (stacked, tabbed, toggle split)&lt;/span&gt;
bindsym &lt;span class="nv"&gt;$mod&lt;/span&gt;+s layout stacking
bindsym &lt;span class="nv"&gt;$mod&lt;/span&gt;+w layout tabbed
bindsym &lt;span class="nv"&gt;$mod&lt;/span&gt;+e layout toggle split
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="styling"&gt;
&lt;h4&gt;Styling&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Breeze&lt;/strong&gt; is the default Qt style of KDE Plasma with good support for both Qt and GTK applications. More: &lt;a class="reference external" href="http://www.circuidipity.com/breeze-qt-gtk.html"&gt;It is a Breeze to make QT and GTK applications look good&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="applications"&gt;
&lt;h4&gt;Applications&lt;/h4&gt;
&lt;p&gt;Create a hotkey to open terminals ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Start a terminal&lt;/span&gt;
bindsym &lt;span class="nv"&gt;$mod&lt;/span&gt;+Return &lt;span class="nb"&gt;exec&lt;/span&gt; urxvt
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Before running the &lt;tt class="docutils literal"&gt;dunst&lt;/tt&gt; notification daemon for the first time, create a default config ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ zcat /usr/share/doc/dunst/dunstrc.example.gz &amp;gt; ~/.config/dunst/dunstrc
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Start notifications and launcher in the background ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Start dunst - lightweight notification-daemon&lt;/span&gt;
&lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id dunst -config ~/.config/dunst/dunstrc

&lt;span class="c1"&gt;# Start rofi - window switcher, run dialog, and dmenu replacement&lt;/span&gt;
bindsym &lt;span class="nv"&gt;$mod&lt;/span&gt;+F2 &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id rofi -monitor -1 -show run
bindsym &lt;span class="nv"&gt;$mod&lt;/span&gt;+Tab &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id rofi -monitor -1 -show window
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Create hotkeys for &lt;strong&gt;screenshots&lt;/strong&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Screenshots using scrot + lximage-qt&lt;/span&gt;
&lt;span class="c1"&gt;# * desktop image&lt;/span&gt;
bindsym --release Print &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id scrot &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;%Y-%m-%dT%H%M%S.png&amp;#39;&lt;/span&gt; -e &lt;span class="s1"&gt;&amp;#39;mv $f ~/Downloads &amp;amp;&amp;amp; lximage-qt ~/Downloads/$f&amp;#39;&lt;/span&gt;
bindsym --release &lt;span class="nv"&gt;$mod&lt;/span&gt;+F4 &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id scrot &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;%Y-%m-%dT%H%M%S.png&amp;#39;&lt;/span&gt; -e &lt;span class="s1"&gt;&amp;#39;mv $f ~/Downloads &amp;amp;&amp;amp; lximage-qt ~/Downloads/$f&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# * active window image&lt;/span&gt;
bindsym --release Shift+Print &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id scrot -d &lt;span class="m"&gt;4&lt;/span&gt; -u -z &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;%Y-%m-%dT%H%M%S.png&amp;#39;&lt;/span&gt; -e &lt;span class="s1"&gt;&amp;#39;mv $f ~/Downloads &amp;amp;&amp;amp; lximage-qt ~/Downloads/$f&amp;#39;&lt;/span&gt;
bindsym --release Shift+F4 &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id scrot -d &lt;span class="m"&gt;4&lt;/span&gt; -u -z &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;%Y-%m-%dT%H%M%S.png&amp;#39;&lt;/span&gt; -e &lt;span class="s1"&gt;&amp;#39;mv $f ~/Downloads &amp;amp;&amp;amp; lximage-qt ~/Downloads/$f&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external" href="https://i3wm.org/docs/userguide.html#assign_workspace"&gt;Automatically put clients on specific workspaces&lt;/a&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Assign torrent client to workspace 10&lt;/span&gt;
assign &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;instance&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;transmission-qt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; 10
&lt;span class="c1"&gt;# Assign music player to workspace 10&lt;/span&gt;
assign &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Rhythmbox&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; 10
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Volume control and notification is a combination of &lt;tt class="docutils literal"&gt;pavucontrol&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;volnoti&lt;/tt&gt;, and &lt;a class="reference external" href="http://www.circuidipity.com/xbindkeysrc.html"&gt;xbindkeys&lt;/a&gt; linked together in a &lt;a class="reference external" href="http://www.circuidipity.com/pavolume.html"&gt;shell script&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="lock-logout-suspend-reboot-shutdown"&gt;
&lt;h4&gt;Lock/Logout/Suspend/Reboot/Shutdown&lt;/h4&gt;
&lt;p&gt;Screen locks are handled by &lt;tt class="docutils literal"&gt;i3lock&lt;/tt&gt;. Pick an image to serve as the lock splashscreen (example: &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.i3lock.png&lt;/span&gt;&lt;/tt&gt;). Command &lt;tt class="docutils literal"&gt;systemctl&lt;/tt&gt; deals with system suspend/reboot/shutdown ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="nv"&gt;$Locker&lt;/span&gt; i3lock -i ~/.i3lock.png &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sleep 1
&lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="nv"&gt;$mode_system&lt;/span&gt; System &lt;span class="o"&gt;(&lt;/span&gt;l&lt;span class="o"&gt;)&lt;/span&gt; lock, &lt;span class="o"&gt;(&lt;/span&gt;e&lt;span class="o"&gt;)&lt;/span&gt; logout, &lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt; suspend, &lt;span class="o"&gt;(&lt;/span&gt;r&lt;span class="o"&gt;)&lt;/span&gt; reboot, &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;Shift+s&lt;span class="o"&gt;)&lt;/span&gt; shutdown
mode &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$mode_system&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
bindsym l &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id &lt;span class="nv"&gt;$Locker&lt;/span&gt;, mode &lt;span class="s2"&gt;&amp;quot;default&amp;quot;&lt;/span&gt;
bindsym e &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id i3-msg exit, mode &lt;span class="s2"&gt;&amp;quot;default&amp;quot;&lt;/span&gt;
bindsym s &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id &lt;span class="nv"&gt;$Locker&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sync &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; systemctl suspend, &lt;span class="se"&gt;\&lt;/span&gt;
mode &lt;span class="s2"&gt;&amp;quot;default&amp;quot;&lt;/span&gt;
bindsym r &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id systemctl reboot, mode &lt;span class="s2"&gt;&amp;quot;default&amp;quot;&lt;/span&gt;
bindsym Shift+s &lt;span class="nb"&gt;exec&lt;/span&gt; --no-startup-id systemctl poweroff -i, mode &lt;span class="s2"&gt;&amp;quot;default&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# back to normal: Enter or Escape&lt;/span&gt;
bindsym Return mode &lt;span class="s2"&gt;&amp;quot;default&amp;quot;&lt;/span&gt;
bindsym Escape mode &lt;span class="s2"&gt;&amp;quot;default&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
bindsym &lt;span class="nv"&gt;$mod&lt;/span&gt;+Pause mode &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$mode_system&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Link: &lt;a class="reference external" href="https://wiki.archlinux.org/index.php/I3#Shutdown.2C_reboot.2C_lock_screen"&gt;Shutdown, reboot, lock screen&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="conditionals"&gt;
&lt;h3&gt;Conditionals&lt;/h3&gt;
&lt;p&gt;The &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.config/i3/config&lt;/span&gt;&lt;/tt&gt; file has no provision for interpreting conditionals, so I put my &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/tree/master/.config/i3"&gt;default settings and conditions in separate files&lt;/a&gt; and generate an appropriate config at runtime using &lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/i3wm_conf"&gt;i3wm_conf&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;a) If two displays are detected&lt;/strong&gt; (laptop connected to external monitor) there is extra workspace configuration ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Automatically place workspaces on specific displays&lt;/span&gt;
&lt;span class="c1"&gt;# * external display =  PRIMARY&lt;/span&gt;
&lt;span class="c1"&gt;# * laptop display =    SECOND&lt;/span&gt;
workspace &lt;span class="m"&gt;1&lt;/span&gt; output PRIMARY
workspace &lt;span class="m"&gt;10&lt;/span&gt; output SECOND
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Customize the included &lt;tt class="docutils literal"&gt;i3bar&lt;/tt&gt; statusbar by adding text-based information snippets configured in &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.config/i3/i3status.conf&lt;/span&gt;&lt;/tt&gt;: system tray, battery status, system load and temperature, and time.&lt;/p&gt;
&lt;p&gt;Start &lt;tt class="docutils literal"&gt;i3bar&lt;/tt&gt; on the external (primary) display and a &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.config/i3/i3status-small.conf"&gt;secondary statusbar&lt;/a&gt; on the other display ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;bar &lt;span class="o"&gt;{&lt;/span&gt;
output PRIMARY
position top
status_command i3status --config ~/.config/i3/i3status.conf
font pango:Terminus 11px
colors &lt;span class="o"&gt;{&lt;/span&gt;
        focused_workspace &lt;span class="c1"&gt;#3daee9 #3daee9 #ffffff&lt;/span&gt;
        inactive_workspace &lt;span class="c1"&gt;#4d4d4d #4d4d4d #ffffff&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

bar &lt;span class="o"&gt;{&lt;/span&gt;
output SECOND
position top
tray_output none
status_command i3status --config ~/.config/i3/i3status-small.conf
font pango:Terminus 11px
colors &lt;span class="o"&gt;{&lt;/span&gt;
        focused_workspace &lt;span class="c1"&gt;#3daee9 #3daee9 #ffffff&lt;/span&gt;
        inactive_workspace &lt;span class="c1"&gt;#4d4d4d #4d4d4d #ffffff&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;b) If only a single display&lt;/strong&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;bar &lt;span class="o"&gt;{&lt;/span&gt;
position top
status_command i3status --config ~/.config/i3/i3status.conf
font pango:Terminus 11px
colors &lt;span class="o"&gt;{&lt;/span&gt;
        focused_workspace &lt;span class="c1"&gt;#3daee9 #3daee9 #ffffff&lt;/span&gt;
        inactive_workspace &lt;span class="c1"&gt;#4d4d4d #4d4d4d #ffffff&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="onward"&gt;
&lt;h3&gt;Onward&lt;/h3&gt;
&lt;p&gt;With some scripting and a few extra applications it all rolls together as a lightweight and delightful &lt;strong&gt;custom desktop environment&lt;/strong&gt;!&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="i3"></category><category term="debian"></category><category term="linux"></category></entry><entry><title>It is a Breeze to make QT and GTK applications look good</title><link href="http://www.circuidipity.com/breeze-qt-gtk.html" rel="alternate"></link><published>2017-07-03T12:40:00-04:00</published><updated>2017-07-16T18:35:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-07-03:/breeze-qt-gtk.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/the-lifecycle-of-debian-objects.html"&gt;PROJECT: The Lifecycle of Debian Objects .:&lt;/a&gt; I went looking for a desktop style with good support for both Qt and GTK applications. &lt;strong&gt;Breeze&lt;/strong&gt; is the default Qt style of KDE Plasma and the one I chose. I like it!&lt;/p&gt;
&lt;p&gt;To setup on Debian ...&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Install the &lt;tt class="docutils literal"&gt;breeze&lt;/tt&gt; package for …&lt;/p&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/the-lifecycle-of-debian-objects.html"&gt;PROJECT: The Lifecycle of Debian Objects .:&lt;/a&gt; I went looking for a desktop style with good support for both Qt and GTK applications. &lt;strong&gt;Breeze&lt;/strong&gt; is the default Qt style of KDE Plasma and the one I chose. I like it!&lt;/p&gt;
&lt;p&gt;To setup on Debian ...&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Install the &lt;tt class="docutils literal"&gt;breeze&lt;/tt&gt; package for Qt and &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;gtk3-engines-breeze&lt;/span&gt;&lt;/tt&gt; for GTK ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install breeze gtk3-engines-breeze
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I am &lt;a class="reference external" href="http://www.circuidipity.com/i3-tiling-window-manager.html"&gt;not running KDE&lt;/a&gt; or any other desktop environment, so I install a few independent configuration tools ...&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;qt5ct&lt;/tt&gt; for Qt5 (package built from &lt;a class="reference external" href="http://www.circuidipity.com/build-qt5ct.html"&gt;mentors.debian.net&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;qt4-qtconfig&lt;/span&gt;&lt;/tt&gt; for Qt4&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;lxappearance&lt;/tt&gt; for Gtk2 and Gtk3&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install qt4-qtconfig lxappearance
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Run each config tool for its respective environment. Settings are saved to ...&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.config/qt5ct/qt5ct.conf&lt;/span&gt;&lt;/tt&gt; for Qt5&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.config/Trolltech.conf&lt;/span&gt;&lt;/tt&gt; for Qt4&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.config/gtk-3.0/settings.ini&lt;/span&gt;&lt;/tt&gt; for Gtk3&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.gtkrc-2.0&lt;/span&gt;&lt;/tt&gt; for Gtk2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Breeze-dark&lt;/strong&gt; is an alternative dark colour scheme. Qt5ct handles colours separately from KDE. Create or modify an existing colour scheme and save with a filename ending in &lt;tt class="docutils literal"&gt;.conf&lt;/tt&gt; to &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.config/qt5ct/colors&lt;/span&gt;&lt;/tt&gt;. I use &lt;a class="reference external" href="https://github.com/wicast/dotfiles/blob/master/qt5ct/.config/qt5ct/colors/BreezeDark.conf"&gt;this one posted on GitHub&lt;/a&gt;. Run &lt;tt class="docutils literal"&gt;qt5ct&lt;/tt&gt; and in &lt;tt class="docutils literal"&gt;Appearance&lt;/tt&gt; select the new custom colour scheme. Select &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;breeze-dark&lt;/span&gt;&lt;/tt&gt; in the other config tools.&lt;/p&gt;
&lt;p&gt;I add to my &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.bashrc&lt;/span&gt;&lt;/tt&gt; (which is sourced by &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.profile&lt;/span&gt;&lt;/tt&gt;) ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;QT_QPA_PLATFORMTHEME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;qt5ct
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Using a dark theme created a problem for me in Firefox with text entry on some websites. Gmail login, Youtube search, and others would use a near-invisible white font on a white background. &lt;strong&gt;Text Contrast for Dark Themes&lt;/strong&gt; is &lt;a class="reference external" href="https://addons.mozilla.org/en-US/firefox/addon/text-contrast-for-dark-themes/"&gt;a Firefox extension&lt;/a&gt; that fixed the issue. Good stuff!&lt;/p&gt;
&lt;p&gt;Links: &lt;a class="reference external" href="https://wiki.archlinux.org/index.php/Uniform_look_for_Qt_and_GTK_applications"&gt;Uniform_look_for_Qt_and_GTK_applications&lt;/a&gt; and &lt;a class="reference external" href="https://wiki.archlinux.org/index.php/Qt#Configuration_of_Qt5_apps_under_environments_other_than_KDE_Plasma"&gt;Configuration of Qt5 apps under environments other than KDE Plasma&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
</content><category term="qt"></category><category term="gtk"></category><category term="debian"></category><category term="linux"></category></entry><entry><title>Build a package from mentors.debian.net</title><link href="http://www.circuidipity.com/build-qt5ct.html" rel="alternate"></link><published>2017-07-02T15:57:00-04:00</published><updated>2017-07-16T18:35:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-07-02:/build-qt5ct.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/the-lifecycle-of-debian-objects.html"&gt;PROJECT: The Lifecycle of Debian Objects .:&lt;/a&gt; A package for the Qt configuration utility &lt;a class="reference external" href="https://sourceforge.net/projects/qt5ct/"&gt;qt5ct&lt;/a&gt; is not available in the Debian archives but a &amp;quot;debianized&amp;quot; version &lt;strong&gt;is&lt;/strong&gt; available through &lt;a class="reference external" href="https://mentors.debian.net/"&gt;mentors.debian.net&lt;/a&gt;, a service where Debian developers sponsor (usually source) packages uploaded by non-Debian developers.&lt;/p&gt;
&lt;p&gt;This &lt;a class="reference external" href="https://mentors.debian.net/package/qt5ct"&gt;qt5ct package&lt;/a&gt; contains a &lt;strong&gt;.dsc …&lt;/strong&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="http://www.circuidipity.com/the-lifecycle-of-debian-objects.html"&gt;PROJECT: The Lifecycle of Debian Objects .:&lt;/a&gt; A package for the Qt configuration utility &lt;a class="reference external" href="https://sourceforge.net/projects/qt5ct/"&gt;qt5ct&lt;/a&gt; is not available in the Debian archives but a &amp;quot;debianized&amp;quot; version &lt;strong&gt;is&lt;/strong&gt; available through &lt;a class="reference external" href="https://mentors.debian.net/"&gt;mentors.debian.net&lt;/a&gt;, a service where Debian developers sponsor (usually source) packages uploaded by non-Debian developers.&lt;/p&gt;
&lt;p&gt;This &lt;a class="reference external" href="https://mentors.debian.net/package/qt5ct"&gt;qt5ct package&lt;/a&gt; contains a &lt;strong&gt;.dsc&lt;/strong&gt; (Debian Source Control) text file that describes the source package. I use this file to build a &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;qt5ct-VERSION.deb&lt;/span&gt;&lt;/tt&gt; binary package ready to be installed!&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;All packages are signed with public key encryption. Ensure the build machine is setup with GnuPG: &lt;a class="reference external" href="http://www.circuidipity.com/verify-pgp-signature-gnupg.html"&gt;Verify a PGP signature with GnuPG&lt;/a&gt;&lt;/p&gt;
&lt;div class="section" id="build-tools"&gt;
&lt;h3&gt;0. Build tools&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Devscripts&lt;/strong&gt; is a collection of tools for Debian developers. Install ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install devscripts
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="import-key"&gt;
&lt;h3&gt;1. Import key&lt;/h3&gt;
&lt;p&gt;Search for the package uploader's public key ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gpg --keyserver hkps://hkps.pool.sks-keyservers.net --search-keys mati75@linuxmint.pl
gpg: data source: https://kerckhoffs.surfnet.nl:443
&lt;span class="o"&gt;(&lt;/span&gt;1&lt;span class="o"&gt;)&lt;/span&gt;     Mateusz Łukasik &amp;lt;mati75@linuxmint.pl&amp;gt;
          &lt;span class="m"&gt;2048&lt;/span&gt; bit RSA key CCD91D6111A06851, created: 2012-01-26
Keys 1-1 of &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mati75@linuxmint.pl&amp;quot;&lt;/span&gt;.  Enter number&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;, N&lt;span class="o"&gt;)&lt;/span&gt;ext, or Q&lt;span class="o"&gt;)&lt;/span&gt;uit &amp;gt; n
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Import the key from the keyserver ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gpg --recv-keys CCD91D6111A06851
gpg: key CCD91D6111A06851: &lt;span class="s2"&gt;&amp;quot;Mateusz Łukasik &amp;lt;mati75@linuxmint.pl&amp;gt;&amp;quot;&lt;/span&gt; not changed
gpg: Total number processed: 1
gpg:              unchanged: 1
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Display the keyring containing our new key ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ gpg --list-keys
/home/foo/.gnupg/pubring.kbx
----------------------------
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
pub   rsa2048 2012-01-26 &lt;span class="o"&gt;[&lt;/span&gt;SC&lt;span class="o"&gt;]&lt;/span&gt;
      D93B0C12C8D04D7AAFBCFA27CCD91D6111A06851
uid           &lt;span class="o"&gt;[&lt;/span&gt; unknown&lt;span class="o"&gt;]&lt;/span&gt; Mateusz Łukasik &amp;lt;mati75@linuxmint.pl&amp;gt;
sub   rsa2048 2012-01-26 &lt;span class="o"&gt;[&lt;/span&gt;E&lt;span class="o"&gt;]&lt;/span&gt;
sub   rsa2048 2012-01-26 &lt;span class="o"&gt;[&lt;/span&gt;E&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Setup the &lt;tt class="docutils literal"&gt;dscverify&lt;/tt&gt; tool from devscripts to use my personal gpg keyring ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cp /etc/devscripts.conf ~/.devscripts
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and in &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.devscripts&lt;/span&gt;&lt;/tt&gt; I activate the option &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;DSCVERIFY_KEYRINGS=&amp;quot;&amp;quot;&lt;/span&gt;&lt;/tt&gt; and specify my keyring location (&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;DSCVERIFY_KEYRINGS=&amp;quot;~/.gnupg/pubring.kbx&amp;quot;&lt;/span&gt;&lt;/tt&gt;).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="build-depends"&gt;
&lt;h3&gt;2. Build-Depends&lt;/h3&gt;
&lt;p&gt;Take note and install any packages required to build the source package that are listed in the &lt;tt class="docutils literal"&gt;*.dsc&lt;/tt&gt; file (&lt;a class="reference external" href="https://mentors.debian.net/debian/pool/main/q/qt5ct/qt5ct_0.31-2.dsc"&gt;qt5ct_0.31-2.dsc&lt;/a&gt;) ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
Build-Depends: debhelper &lt;span class="o"&gt;(&lt;/span&gt;&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt; 10&lt;span class="o"&gt;)&lt;/span&gt;, qtbase5-dev, libqt5svg5-dev, qttools5-dev-tools, qtbase5-private-dev, libfontconfig1-dev, libfreetype6-dev, libglib2.0-dev, libxrender-dev, libmtdev-dev &lt;span class="o"&gt;[&lt;/span&gt;linux-any&lt;span class="o"&gt;]&lt;/span&gt;, libegl1-mesa-dev
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Install ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install debhelper qtbase5-dev libqt5svg5-dev qttools5-dev-tools qtbase5-private-dev libfontconfig1-dev libfreetype6-dev libglib2.0-dev libxrender-dev libmtdev-dev libegl1-mesa-dev
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="build-and-install"&gt;
&lt;h3&gt;3. Build and install&lt;/h3&gt;
&lt;p&gt;Use &lt;tt class="docutils literal"&gt;dget&lt;/tt&gt; to download the source and &lt;tt class="docutils literal"&gt;debuild&lt;/tt&gt; to build the &lt;tt class="docutils literal"&gt;*.deb&lt;/tt&gt; file ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dget https://mentors.debian.net/debian/pool/main/q/qt5ct/qt5ct_0.31-2.dsc
$ &lt;span class="nb"&gt;cd&lt;/span&gt; /path/to/extracted/package
$ debuild -us -uc
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Package &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;qt5ct_0.31-2_amd64.deb&lt;/span&gt;&lt;/tt&gt; is built and placed one directory up from the current build directory. Install using &lt;tt class="docutils literal"&gt;dpkg&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo dpkg -i qt5ct_0.31-2_amd64.deb
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If &lt;tt class="docutils literal"&gt;dpkg&lt;/tt&gt; exits with an error message about dependencies, install the missing ones and run the command again.&lt;/p&gt;
&lt;p&gt;Links: &lt;a class="reference external" href="https://wiki.debian.org/DebianMentorsFaq#How_do_I_install_a_package_from_mentor.debian.net.3F"&gt;How do I install a package from mentors.debian.net&lt;/a&gt; and &lt;a class="reference external" href="https://debian-handbook.info/browse/stable/sect.source-package-structure.html"&gt;Structure of a source package&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="qt5ct"></category><category term="qt"></category><category term="shell"></category><category term="debian"></category><category term="linux"></category><category term="crypto"></category></entry><entry><title>Colemak keyboard layout on Debian</title><link href="http://www.circuidipity.com/colemak-debian.html" rel="alternate"></link><published>2017-06-29T09:50:00-04:00</published><updated>2017-06-29T09:50:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-29:/colemak-debian.html</id><summary type="html">&lt;p&gt;Change a default QWERTY keyboard layout to &lt;strong&gt;Colemak&lt;/strong&gt; on Debian.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;I am a recent convert to (slow) touch typing, and - surprise - it turns out we have learned new things about making keyboards since QWERTY made its appearance in the 19th century! &lt;a class="reference external" href="https://colemak.com/"&gt;Colemak&lt;/a&gt; is an alternative keyboard layout that …&lt;/p&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;Change a default QWERTY keyboard layout to &lt;strong&gt;Colemak&lt;/strong&gt; on Debian.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;I am a recent convert to (slow) touch typing, and - surprise - it turns out we have learned new things about making keyboards since QWERTY made its appearance in the 19th century! &lt;a class="reference external" href="https://colemak.com/"&gt;Colemak&lt;/a&gt; is an alternative keyboard layout that - by changing the location of less than 20 keys - significantly reduces finger movement and makes typing feel much more comfortable!&lt;/p&gt;
&lt;p&gt;No need to throw out your keyboard. It is easy to remap the keys for different layouts and toggle back and forth between mappings.&lt;/p&gt;
&lt;div class="section" id="try-out-colemak"&gt;
&lt;h3&gt;Try out Colemak&lt;/h3&gt;
&lt;p&gt;Colemak is already installed in Debian. Display current settings in X and switch to Colemak using the &lt;tt class="docutils literal"&gt;setxkbmap&lt;/tt&gt; command ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ setxkbmap -query
rules:      evdev
model:      pc105
layout:     us
$ setxkbmap us -variant colemak
$ setxkbmap -query
rules:      evdev
model:      pc105
layout:     us
variant:    colemak
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When I first started using Colemak my friend &lt;a class="reference external" href="http://gilesorr.com/"&gt;Giles&lt;/a&gt; (longtime Dvorak user) suggested creating these easy-to-remember &lt;strong&gt;aliases&lt;/strong&gt; in &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.bashrc"&gt;~/.bashrc&lt;/a&gt; to toggle between keyboard mappings ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;arst&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;setxkbmap us &amp;amp;&amp;amp; ~/bin/keyboardconf&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;asdf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;setxkbmap us -variant colemak &amp;amp;&amp;amp; ~/bin/keyboardconf&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;My shell script &lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/keyboardconf"&gt;keyboardconf&lt;/a&gt; loads appropriate &lt;a class="reference external" href="http://www.circuidipity.com/xbindkeysrc.html"&gt;~/.xbindkeysrc&lt;/a&gt; and &lt;a class="reference external" href="http://www.circuidipity.com/xmodmap.html"&gt;~/.xmodmap&lt;/a&gt; files for different keyboard types that I use. These configuration files must be reloaded when changing a keyboard mapping.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="colemak-as-default-layout"&gt;
&lt;h3&gt;Colemak as default layout&lt;/h3&gt;
&lt;p&gt;Install some keyboard config tools ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install console-setup keyboard-configuration
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Default keyboard layout in Debian is configured in &lt;tt class="docutils literal"&gt;/etc/default/keyboard&lt;/tt&gt; and is shared between X and the command line ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/default/keyboard
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;XKBMODEL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pc105&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;XKBLAYOUT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;us&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;XKBVARIANT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;XKBOPTIONS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="nv"&gt;BACKSPACE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;guess&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Set Colemak as the new default by either manually editing this file, or run ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo dpkg-reconfigure keyboard-configuration
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="keyboard-model"&gt;
&lt;h4&gt;Keyboard Model&lt;/h4&gt;
&lt;img alt="kb model" class="align-center" src="images/kb_model.png" style="width: 800px; height: 300px;" /&gt;
&lt;/div&gt;
&lt;div class="section" id="keyboard-layout"&gt;
&lt;h4&gt;Keyboard layout&lt;/h4&gt;
&lt;img alt="kb layout" class="align-center" src="images/kb_layout.png" style="width: 800px; height: 520px;" /&gt;
&lt;/div&gt;
&lt;div class="section" id="key-to-function-as-altgr"&gt;
&lt;h4&gt;Key to function as AltGr&lt;/h4&gt;
&lt;img alt="kb altgr" class="align-center" src="images/kb_altgr.png" style="width: 800px; height: 300px;" /&gt;
&lt;/div&gt;
&lt;div class="section" id="compose-key"&gt;
&lt;h4&gt;Compose key&lt;/h4&gt;
&lt;img alt="kb compose" class="align-center" src="images/kb_compose.png" style="width: 800px; height: 240px;" /&gt;
&lt;/div&gt;
&lt;div class="section" id="control-alt-backspace"&gt;
&lt;h4&gt;Control+Alt+Backspace&lt;/h4&gt;
&lt;img alt="kb control+Alt+Backspace" class="align-center" src="images/kb_cab.png" style="width: 800px; height: 90px;" /&gt;
&lt;p&gt;View changes ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/default/keyboard
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;XKBMODEL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pc105&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;XKBLAYOUT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;us&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;XKBVARIANT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;colemak&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;XKBOPTIONS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;terminate:ctrl_alt_bksp&amp;quot;&lt;/span&gt;

&lt;span class="nv"&gt;BACKSPACE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;guess&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Activate changes in X ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo udevadm trigger --subsystem-match&lt;span class="o"&gt;=&lt;/span&gt;input --action&lt;span class="o"&gt;=&lt;/span&gt;change
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Activate changes in the console ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo setupcon
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... or reboot.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="bootup"&gt;
&lt;h3&gt;Bootup&lt;/h3&gt;
&lt;p&gt;Set the keyboard to Colemak at bootup by modifying &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;/etc/initramfs-tools/initramfs.conf&lt;/span&gt;&lt;/tt&gt; to read the keyboard mapping ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Load a keymap during the initramfs stage.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="nv"&gt;KEYMAP&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;y
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Whenever modifying initramfs it is necessary to rebuild to apply changes ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo update-initramfs -u
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Links: &lt;a class="reference external" href="https://wiki.debian.org/Keyboard"&gt;wiki.debian.org/Keyboard&lt;/a&gt; and &lt;a class="reference external" href="https://manpages.debian.org/stretch/keyboard-configuration/keyboard.5.en.html"&gt;man 5 keyboard&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="colemak"></category><category term="keyboard"></category><category term="debian"></category><category term="linux"></category></entry><entry><title>ThinkPad USB Keyboard with TrackPoint</title><link href="http://www.circuidipity.com/thinkpad-usb-keyboard-trackpoint.html" rel="alternate"></link><published>2017-06-28T08:40:00-04:00</published><updated>2017-06-28T08:40:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-28:/thinkpad-usb-keyboard-trackpoint.html</id><summary type="html">&lt;p&gt;A Thinkpad keyboard minus the Thinkpad with the classic Trackpoint + Left/Middle/Right mouse buttons. Its attached to my &lt;a class="reference external" href="http://www.circuidipity.com/jessiebook-to-stretchbook.html"&gt;Stretchbook&lt;/a&gt; and I want to change the behaviour of a few keys.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Attach the keyboard ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lsusb &lt;span class="p"&gt;|&lt;/span&gt; grep -i keyboard
Bus &lt;span class="m"&gt;001&lt;/span&gt; Device 002: ID 17ef:6009 Lenovo ThinkPad Keyboard …&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;A Thinkpad keyboard minus the Thinkpad with the classic Trackpoint + Left/Middle/Right mouse buttons. Its attached to my &lt;a class="reference external" href="http://www.circuidipity.com/jessiebook-to-stretchbook.html"&gt;Stretchbook&lt;/a&gt; and I want to change the behaviour of a few keys.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Attach the keyboard ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lsusb &lt;span class="p"&gt;|&lt;/span&gt; grep -i keyboard
Bus &lt;span class="m"&gt;001&lt;/span&gt; Device 002: ID 17ef:6009 Lenovo ThinkPad Keyboard with TrackPoint
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="caps-lock-and-xmodmap"&gt;
&lt;h3&gt;0. Caps_Lock and xmodmap&lt;/h3&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;Caps_Lock&lt;/tt&gt; occupies a prime location and - seeing as I do not carry on many ALL CAPS conversations - the key can be re-purposed for better use. I use &lt;a class="reference external" href="http://www.circuidipity.com/xmodmap.html"&gt;xmodmap&lt;/a&gt; to modify the keymap and transform the key into &lt;tt class="docutils literal"&gt;BackSpace&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Retrieve current keymap (and the &lt;tt class="docutils literal"&gt;keycode&lt;/tt&gt; for &lt;tt class="docutils literal"&gt;Caps_Lock&lt;/tt&gt;) ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xmodmap -pke
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
keycode  &lt;span class="nv"&gt;66&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; Caps_Lock NoSymbol Caps_Lock
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Output for &lt;tt class="docutils literal"&gt;Caps_Lock&lt;/tt&gt; using &lt;tt class="docutils literal"&gt;xev&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;KeyPress event, serial 32, synthetic NO, window 0x1600001,
    root 0xb4, subw 0x0, &lt;span class="nb"&gt;time&lt;/span&gt; 578277182, &lt;span class="o"&gt;(&lt;/span&gt;137,-6&lt;span class="o"&gt;)&lt;/span&gt;, root:&lt;span class="o"&gt;(&lt;/span&gt;781,12&lt;span class="o"&gt;)&lt;/span&gt;,
    state 0x0, keycode &lt;span class="m"&gt;66&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;keysym 0xffe5, Caps_Lock&lt;span class="o"&gt;)&lt;/span&gt;, same_screen YES,
    XLookupString gives &lt;span class="m"&gt;0&lt;/span&gt; bytes:
    XmbLookupString gives &lt;span class="m"&gt;0&lt;/span&gt; bytes:
     XFilterEvent returns: False
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Test a new key modification in the current Xsession ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xmodmap -e &lt;span class="s2"&gt;&amp;quot;keycode 66 = BackSpace&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; xmodmap -e &lt;span class="s2"&gt;&amp;quot;clear Lock&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make the change sticky by adding the keymapping to &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xmodmap&lt;/span&gt;&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;! Modify Caps_Lock into Backspace
keycode &lt;span class="nv"&gt;66&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; BackSpace
clear Lock
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Modify &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xinitrc&lt;/span&gt;&lt;/tt&gt; to load keymap at &lt;tt class="docutils literal"&gt;startx&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -f ~/.xmodmap &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    xmodmap ~/.xmodmap
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and apply the new settings in the current session ..&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;xmodmap ~/.xmodmap
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="multimedia-keys-and-xbindkeys"&gt;
&lt;h3&gt;1. Multimedia keys and xbindkeys&lt;/h3&gt;
&lt;p&gt;This keyboard includes multimedia keys. Create keyboard shortcuts for these specialty keys by installing ...&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;xbindkeys&lt;/tt&gt; - associate keys to shell commands&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;pulseaudio-utils&lt;/span&gt;&lt;/tt&gt; - manage sound with &lt;tt class="docutils literal"&gt;pactl&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;rhythmbox-plugins&lt;/span&gt;&lt;/tt&gt; - (optional) player controls&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install xbindkeys pulseaudio-utils rhythmbox-plugins
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;rhythmbox-plugins&lt;/span&gt;&lt;/tt&gt; the &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Fn+{Play,Pause,Previous,Next,Stop}&lt;/span&gt;&lt;/tt&gt; controls &amp;quot;just work&amp;quot; with the audio player. I use &lt;a class="reference external" href="http://www.circuidipity.com/xbindkeysrc.html"&gt;xbindkeys&lt;/a&gt;  to associate new functions to keys.&lt;/p&gt;
&lt;p&gt;Retrieve the &lt;tt class="docutils literal"&gt;keycodes&lt;/tt&gt; and &lt;tt class="docutils literal"&gt;keysyms&lt;/tt&gt; of the volume keys ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xmodmap -pke &lt;span class="p"&gt;|&lt;/span&gt; egrep -i &lt;span class="s1"&gt;&amp;#39;volume|mute&amp;#39;&lt;/span&gt;
keycode &lt;span class="nv"&gt;121&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; XF86AudioMute NoSymbol XF86AudioMute
keycode &lt;span class="nv"&gt;122&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; XF86AudioLowerVolume NoSymbol XF86AudioLowerVolume
keycode &lt;span class="nv"&gt;123&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; XF86AudioRaiseVolume NoSymbol XF86AudioRaiseVolume
keycode &lt;span class="nv"&gt;198&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; XF86AudioMicMute NoSymbol XF86AudioMicMute
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I create a &lt;a class="reference external" href="http://www.circuidipity.com/pavolume.html"&gt;standalone script&lt;/a&gt; to control PulseAudio volume and associate the new command &lt;tt class="docutils literal"&gt;paVolume&lt;/tt&gt; and its options to volume keys in &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xbindkeysrc&lt;/span&gt;&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Mute/lower/raise volume&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;paVolume -m&amp;quot;&lt;/span&gt;
XF86AudioMute
&lt;span class="s2"&gt;&amp;quot;paVolume -d&amp;quot;&lt;/span&gt;
XF86AudioLowerVolume
&lt;span class="s2"&gt;&amp;quot;paVolume -u&amp;quot;&lt;/span&gt;
XF86AudioRaiseVolume
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add command &lt;tt class="docutils literal"&gt;xbindkeys&lt;/tt&gt; to &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xinitrc&lt;/span&gt;&lt;/tt&gt; to load the new configuration at &lt;tt class="docutils literal"&gt;startx&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -f ~/.xbindkeysrc &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    xbindkeys
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="trackpoint"&gt;
&lt;h3&gt;2. TrackPoint&lt;/h3&gt;
&lt;p&gt;Customize pointer settings by installing &lt;tt class="docutils literal"&gt;xinput&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install xinput
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Discover the &lt;tt class="docutils literal"&gt;DEVICE &amp;lt;ID&amp;gt;&lt;/tt&gt; with &lt;tt class="docutils literal"&gt;xinput list | grep &amp;quot;TrackPoint&amp;quot; | grep &amp;quot;pointer&amp;quot;&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xinput list &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;quot;TrackPoint&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;quot;pointer&amp;quot;&lt;/span&gt;
⎜   ↳ Lite-On Technology Corp. ThinkPad USB Keyboard with TrackPoint    &lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;   &lt;span class="o"&gt;[&lt;/span&gt;slave  pointer  &lt;span class="o"&gt;(&lt;/span&gt;2&lt;span class="o"&gt;)]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Trackpoint is auto-detected but slow. My old method of configuring the pointer was failing under Debian _stable_/stretch (device id=13) ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xinput set-prop &lt;span class="m"&gt;13&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Device Accel Constant Deceleration&amp;quot;&lt;/span&gt; 0.30
property &lt;span class="s1"&gt;&amp;#39;Device Accel Constant Deceleration&amp;#39;&lt;/span&gt; doesn&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;t exist, you need to specify its &lt;span class="nb"&gt;type&lt;/span&gt; and format
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and viewing the device properties with &lt;tt class="docutils literal"&gt;xinput &lt;span class="pre"&gt;list-props&lt;/span&gt; 13&lt;/tt&gt; shows the problem; the old &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Device...&lt;/span&gt;&lt;/tt&gt; settings have been replaced with &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;libinput...&lt;/span&gt;&lt;/tt&gt;, which is a library to handle input devices. Xorg in the latest Debian has switched away from using &lt;tt class="docutils literal"&gt;evdev&lt;/tt&gt; to the &lt;tt class="docutils literal"&gt;libinput&lt;/tt&gt; driver ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dpkg -l &lt;span class="p"&gt;|&lt;/span&gt; grep xserver-xorg-input
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
ii  xserver-xorg-input-libinput     0.23.0-2    amd64   X.Org X server -- libinput input driver
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Check out which devices are managed by &lt;tt class="docutils literal"&gt;libinput&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ grep libinput &lt;span class="nv"&gt;$HOME&lt;/span&gt;/.local/share/xorg/Xorg.0.log
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;[ Fix! ]&lt;/strong&gt; Modify the &amp;quot;Coordinate Transformation Matrix&amp;quot;, a &lt;a class="reference external" href="https://wiki.ubuntu.com/X/InputCoordinateTransformation"&gt;transformation matrix used to calculate a pointer movement.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Current setting ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xinput list-props &lt;span class="m"&gt;13&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;quot;Coordinate Transformation Matrix&amp;quot;&lt;/span&gt;
Coordinate Transformation Matrix &lt;span class="o"&gt;(&lt;/span&gt;140&lt;span class="o"&gt;)&lt;/span&gt;: 1.000000, 0.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000, 0.000000, 1.000000
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Experiment a bit with setting a new matrix in row-order. &lt;a class="footnote-reference" href="#id2" id="id1"&gt;[1]&lt;/a&gt; I wanted a faster pointer speed and found this configuration to my liking ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xinput set-prop &lt;span class="m"&gt;13&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Coordinate Transformation Matrix&amp;quot;&lt;/span&gt; 2.600000, 0.000000, 0.000000, 0.000000, 2.600000, 0.000000, 0.000000, 0.000000, 1.000000
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I &lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/keyboardconf"&gt;created a shell script&lt;/a&gt; that detects and applies custom settings as per keyboard type. I add the command to &lt;a class="reference external" href="http://www.circuidipity.com/xinitrc.html"&gt;my xinitrc&lt;/a&gt; to be run at &lt;tt class="docutils literal"&gt;startx&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~/bin/keyboardconf &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sources: dotfiles/&lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.thinkpad_usb"&gt;.xmodmap.thinkpad_usb&lt;/a&gt;, dotfiles/&lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xinitrc"&gt;.xinitrc&lt;/a&gt;, dotfiles/&lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.thinkpad_usb"&gt;.xbindkeysrc.thinkpad_usb&lt;/a&gt;, and homebin/&lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/keyboardconf"&gt;keyboardconf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;div class="section" id="notes"&gt;
&lt;h4&gt;Notes&lt;/h4&gt;
&lt;table class="docutils footnote" frame="void" id="id2" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a class="reference external" href="https://unix.stackexchange.com/a/177640"&gt;&amp;quot;I don't want any mouse acceleration, but I want to increase the speed of my mouse&amp;quot;&lt;/a&gt; and &lt;a class="reference external" href="https://wiki.ubuntu.com/X/InputCoordinateTransformation"&gt;InputCoordinateTransformation&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="keyboard"></category><category term="linux"></category></entry><entry><title>Detect and configure keyboards</title><link href="http://www.circuidipity.com/keyboardconf.html" rel="alternate"></link><published>2017-06-27T23:30:00-04:00</published><updated>2017-06-27T23:30:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-27:/keyboardconf.html</id><summary type="html">&lt;p&gt;I have two keyboards I am interested in modifying with custom hotkey actions (via &lt;a class="reference external" href="http://www.circuidipity.com/xbindkeysrc.html"&gt;xbindkeys&lt;/a&gt;) and remapping keys (via &lt;a class="reference external" href="http://www.circuidipity.com/xmodmap.html"&gt;xmodmap&lt;/a&gt;). So for my &lt;a class="reference external" href="http://www.circuidipity.com/jessiebook-to-stretchbook.html"&gt;Stretchbook's&lt;/a&gt; keyboard I created &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.chromebook"&gt;.xbindkeysrc.chromebook&lt;/a&gt; and &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.chromebook"&gt;.xmodmap.chromebook&lt;/a&gt;, my &lt;a class="reference external" href="http://www.circuidipity.com/thinkpad-usb-keyboard-trackpoint.html"&gt;Thinkpad USB Keyboard + Trackpoint&lt;/a&gt; uses &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.thinkpad_usb"&gt;.xbindkeysrc.thinkpad_usb&lt;/a&gt; and &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.thinkpad_usb"&gt;.xmodmap.thinkpad_usb&lt;/a&gt;, and I would create &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xbindkeysrc&lt;/span&gt;&lt;/tt&gt; and &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xmodmap …&lt;/span&gt;&lt;/tt&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;I have two keyboards I am interested in modifying with custom hotkey actions (via &lt;a class="reference external" href="http://www.circuidipity.com/xbindkeysrc.html"&gt;xbindkeys&lt;/a&gt;) and remapping keys (via &lt;a class="reference external" href="http://www.circuidipity.com/xmodmap.html"&gt;xmodmap&lt;/a&gt;). So for my &lt;a class="reference external" href="http://www.circuidipity.com/jessiebook-to-stretchbook.html"&gt;Stretchbook's&lt;/a&gt; keyboard I created &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.chromebook"&gt;.xbindkeysrc.chromebook&lt;/a&gt; and &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.chromebook"&gt;.xmodmap.chromebook&lt;/a&gt;, my &lt;a class="reference external" href="http://www.circuidipity.com/thinkpad-usb-keyboard-trackpoint.html"&gt;Thinkpad USB Keyboard + Trackpoint&lt;/a&gt; uses &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.thinkpad_usb"&gt;.xbindkeysrc.thinkpad_usb&lt;/a&gt; and &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.thinkpad_usb"&gt;.xmodmap.thinkpad_usb&lt;/a&gt;, and I would create &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xbindkeysrc&lt;/span&gt;&lt;/tt&gt; and &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xmodmap&lt;/span&gt;&lt;/tt&gt; symlinks to the relevant config for the keyboard in use.&lt;/p&gt;
&lt;p&gt;Now that Stretchbook is my primary machine, I may be using either keyboard on the same machine depending on location: the built-in keyboard when away; connecting to the USB keyboard and external display when at home. Old method of symlinking won't work if I am switching which keyboard I use.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[ FIX! ]&lt;/strong&gt; I created the &lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/keyboardconf"&gt;keyboardconf&lt;/a&gt; shell script to detect attached keyboards and load appropriate modifications. Priority is assigned to the external Thinkpad keyboard and, failing to detect that device, the program falls back to setting up the built-in keyboard. Scripting this detection makes it easy for me to add more keyboard types in the future!&lt;/p&gt;
&lt;p&gt;Program is in my &lt;a class="reference external" href="http://www.circuidipity.com/homebin.html"&gt;~/bin&lt;/a&gt; and I add the command to &lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xinitrc"&gt;~/.xinitrc&lt;/a&gt; to run at &lt;tt class="docutils literal"&gt;startx&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~/bin/keyboardconf &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sources: homebin/&lt;a class="reference external" href="https://github.com/vonbrownie/homebin/blob/master/keyboardconf"&gt;keyboardconf&lt;/a&gt;, dotfiles/&lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.chromebook"&gt;.xbindkeysrc.chromebook&lt;/a&gt;, dotfiles/&lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.chromebook"&gt;.xmodmap.chromebook&lt;/a&gt;, dotfiles/&lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xbindkeysrc.thinkpad_usb"&gt;.xbindkeysrc.thinkpad_usb&lt;/a&gt;, dotfiles/&lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.thinkpad_usb"&gt;.xmodmap.thinkpad_usb&lt;/a&gt;, and dotfiles/&lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xinitrc"&gt;.xinitrc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
</content><category term="keyboard"></category><category term="shell"></category><category term="programming"></category><category term="homebin"></category><category term="linux"></category></entry><entry><title>Dot xmodmap</title><link href="http://www.circuidipity.com/xmodmap.html" rel="alternate"></link><published>2017-06-26T11:33:00-04:00</published><updated>2017-06-26T11:33:00-04:00</updated><author><name>Daniel Wayne Armstrong</name></author><id>tag:www.circuidipity.com,2017-06-26:/xmodmap.html</id><summary type="html">&lt;p&gt;The &lt;tt class="docutils literal"&gt;xmodmap&lt;/tt&gt; utility is useful for remapping keys. I use it to change the behaviour of a few keys on chromebook keyboards.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Install (on Debian) &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;x11-xserver-utils&lt;/span&gt;&lt;/tt&gt; and write any modifications to a newly-created &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xmodmap&lt;/span&gt;&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install x11-xserver-utils
$ touch ~/.xmodmap
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;View the current keymap and I note the …&lt;/p&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;The &lt;tt class="docutils literal"&gt;xmodmap&lt;/tt&gt; utility is useful for remapping keys. I use it to change the behaviour of a few keys on chromebook keyboards.&lt;/p&gt;
&lt;div class="section" id="let-s-go"&gt;
&lt;h2&gt;Let's go!&lt;/h2&gt;
&lt;p&gt;Install (on Debian) &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;x11-xserver-utils&lt;/span&gt;&lt;/tt&gt; and write any modifications to a newly-created &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xmodmap&lt;/span&gt;&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install x11-xserver-utils
$ touch ~/.xmodmap
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;View the current keymap and I note the keycodes to be remapped ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xmodmap -pke
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
keycode &lt;span class="nv"&gt;108&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; Alt_R Meta_R Alt_R Meta_R
keycode &lt;span class="nv"&gt;124&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; XF86PowerOff NoSymbol XF86PowerOff
keycode &lt;span class="nv"&gt;133&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; Super_L NoSymbol Super_L
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make my changes in &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xmodmap&lt;/span&gt;&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;! Chromebook &lt;span class="s1"&gt;&amp;#39;Search&amp;#39;&lt;/span&gt; meta key to backspace
! IMPORTANT: &lt;span class="s1"&gt;&amp;#39;clear Mod4&amp;#39;&lt;/span&gt; to &lt;span class="nb"&gt;enable&lt;/span&gt; key combo in GTK apps
clear Mod4
keycode &lt;span class="nv"&gt;133&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; BackSpace

keycode &lt;span class="nv"&gt;108&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; Alt_R

! &lt;span class="s1"&gt;&amp;#39;HandlePowerKey=ignore&amp;#39;&lt;/span&gt; in /etc/systemd/logind.conf and powerkey to pause
keycode &lt;span class="nv"&gt;124&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; Pause
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Run &lt;tt class="docutils literal"&gt;xmodmap &lt;span class="pre"&gt;~/.xmodmap&lt;/span&gt;&lt;/tt&gt; to activate the key remapping. Check out the altered keycodes ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xmodmap -pke
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
keycode &lt;span class="nv"&gt;108&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; Alt_R NoSymbol Alt_R
keycode &lt;span class="nv"&gt;124&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; Pause NoSymbol Pause
keycode &lt;span class="nv"&gt;133&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; BackSpace NoSymbol BackSpace
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make an entry in &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;~/.xinitrc&lt;/span&gt;&lt;/tt&gt; to run the command at &lt;tt class="docutils literal"&gt;startx&lt;/tt&gt; ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xmodmap -pke
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Modify key mappings (handled by keyboardconf)&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -f ~/.xmodmap &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    xmodmap ~/.xmodmap
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sources: dotfiles/&lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xmodmap.chromebook"&gt;.xmodmap.chromebook&lt;/a&gt; and dotfiles/&lt;a class="reference external" href="https://github.com/vonbrownie/dotfiles/blob/master/.xinitrc"&gt;.xinitrc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;/div&gt;
</content><category term="dotfiles"></category><category term="shell"></category><category term="linux"></category><category term="keyboard"></category></entry></feed>