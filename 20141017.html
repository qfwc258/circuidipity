<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
        <title>Circuidipity | Pentium M and PAE</title>
        <meta http-equiv="content-type" content="text/html"; charset="utf-8" />
        <meta http-equiv="pragma" content="no-cache" />
        <meta name="author" content="Daniel Wayne Armstrong" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/main.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/pygment.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/font.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/images/icons/font-awesome/css/font-awesome.min.css">
        <link rel="icon" href="http://www.circuidipity.com/theme/images/favicon.ico" type="image/x-icon" />
</head>

<body>
        <!-- content -->

<!-- breadcrumb trail -->
<div id="breadcrumb">
    <p><a href="/"><img class="minime" src="/theme/images/minime.png" alt="Mini Me" height="38" width="38" /> Howdy!</a> &nbsp;<i class="fa fa-arrow-right"></i>&nbsp;
    Friday 17 October 2014</p>
</div>

<!-- article -->
<h1>Pentium M and PAE</h1>
<div id="article">
    <p>I have a <strong>Thinkpad X31</strong> with a <strong>Pentium M</strong> processor. A standard Ubuntu 14.04 install will bail thinking the machine has a <strong>non-PAE</strong> processor when in fact the CPU <strong>does</strong> support PAE extensions but omits reporting the necessary details.</p>
<p>From the <a class="reference external" href="https://help.ubuntu.com/community/PAE">Ubuntu Community Wiki</a>:</p>
<blockquote>
A number of older <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_Intel_Pentium_M_microprocessors">Pentium M</a> processors produced around 2003-4 (the Banias family) do not display the PAE flag, and hence a normal installation fails. However, these processors are in fact able to run the latest (and PAE-demanding) kernels if only the installation process is modified a little. The problem is not missing PAE, it's about the processor not displaying its full capabilities.</blockquote>
<p><a class="reference external" href="http://lubuntu.net/">Lubuntu</a> is a Ubuntu-based distro using the lightweight LXDE desktop (good match for older machines like the X31) and <a class="reference external" href="https://wiki.ubuntu.com/Lubuntu/AdvancedMethods#Pentium_M_and_Celeron_M">provides instructions</a> for adding the <tt class="docutils literal">forcepae</tt> kernel option to the Lubuntu installer. This allows the installer to correctly detect a PAE-capable processor and the system to install as desired.</p>
<p>My own alternative is to <a class="reference external" href="http://www.circuidipity.com/multi-boot-usb.html">prepare a GRUB-capable USB stick</a> capable of booting the Lubuntu installer + <a class="reference external" href="http://www.circuidipity.com/multi-boot-usb.html">other Linux images from the same device</a>. In this scenario I create an entry in <tt class="docutils literal">grub.cfg</tt> for Lubuntu to boot with <tt class="docutils literal">forcepae</tt> pre-configured:</p>
<div class="highlight"><pre><span></span>menuentry <span class="s2">&quot;Lubuntu 14.04 LTS - 32bit Installer (&#39;forcepae&#39; for Pentium M)&quot;</span> <span class="o">{</span>
<span class="nb">set</span> <span class="nv">iso</span><span class="o">=</span><span class="s2">&quot;/iso/lubuntu-14.04.1-desktop-i386.iso&quot;</span>
loopback loop <span class="nv">$iso</span>
linux <span class="o">(</span>loop<span class="o">)</span>/casper/vmlinuz linux <span class="nv">boot</span><span class="o">=</span>casper iso-scan/filename<span class="o">=</span><span class="nv">$iso</span> noprompt noeject forcepae
initrd <span class="o">(</span>loop<span class="o">)</span>/casper/initrd.lz
<span class="o">}</span>
</pre></div>
<p>See <a class="reference external" href="http://www.circuidipity.com/multi-boot-usb.html">'Transform a USB stick into a boot device packing multiple Linux distros'</a> for details.</p>
<p>Post-install - and <strong>before</strong> running any upgrades - the PAE flag needs to be set for the CPU, otherwise any attempt at upgrading the kernel will bail (package manager thinks its dealing with a non-PAE processor).</p>
<p>Add <tt class="docutils literal">forcepae</tt> option to <tt class="docutils literal">GRUB_CMDLINE_LINUX</tt> in <tt class="docutils literal">/etc/default/grub</tt>:</p>
<div class="highlight"><pre><span></span><span class="nv">GRUB_CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&quot;forcepae&quot;</span>
</pre></div>
<p>Run:</p>
<div class="highlight"><pre><span></span>$ sudo update-grub
</pre></div>
<p>... and reboot.</p>
<p>Confirm that <tt class="docutils literal">/proc/cpuinfo</tt> displays the <tt class="docutils literal">pae</tt> flag (0=false, 1=true):</p>
<div class="highlight"><pre><span></span>$ cat /proc/cpuinfo <span class="p">|</span> grep -cim1 pae
$ 1
</pre></div>
<p>Happy hacking!</p>

    <p class="articletags"><i class="fa fa-coffee"></i> More         &#8226; <a class="tag" href="http://www.circuidipity.com/tag-lubuntu.html">lubuntu</a>
        &#8226; <a class="tag" href="http://www.circuidipity.com/tag-linux.html">linux</a>
</p>
</div>

<!-- Nav links to previous|next article -->
<div id="navmenu">
    <hr />
    <p class="prevpost"><i class="fa fa-arrow-left"></i> Older<br />
        <a href="http://www.circuidipity.com/restore-stock-android-on-nexus-7.html">Restore stock Android on Nexus 7</a></p>
    <p class="nextpost">Newer <i class="fa fa-arrow-right"></i><br />
        <a href="http://www.circuidipity.com/c720-lubuntubook-install.html">Install Lubuntu 14.04 on the Acer C720 Chromebook</a></p>
</div>


        <!-- footer -->
<div id="footer">
    <img class="imgfooter" src="./theme/images/footerbar.png" />
    <p class="contentinfo">
    <span class="noWrap">
        Copyright &#169; 2017 and
        <a rel="license" class="ccLicense" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA License</a> by
        <a rel="author" class="authorID" href="/">Daniel Wayne Armstrong</a>
    </span>
    <span class="noWrap">
        <i class="fa fa-globe"></i>
        Find me at <span class="whoa">daniel at circuidipity dot com</span>
    </span>
    <br />
    Don't miss a thing... updates by
    <a href="feed.xml">RSS</a> and
    <a class="subTweat" href="https://twitter.com/circuidipity">Twitter</a>
    </p>
</div></body>
</html>