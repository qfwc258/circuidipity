<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
        <title>Circuidipity | Verify a PGP signature with GnuPG</title>
        <meta http-equiv="content-type" content="text/html"; charset="utf-8" />
        <meta http-equiv="pragma" content="no-cache" />
        <meta name="author" content="Daniel Wayne Armstrong" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/main.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/pygment.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/font.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/images/icons/font-awesome/css/font-awesome.min.css">
        <link rel="icon" href="http://www.circuidipity.com/theme/images/favicon.ico" type="image/x-icon" />
        <!-- analytics -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89591498-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>
        <!-- content -->

<!-- breadcrumb trail -->
<div id="breadcrumb">
    <p><a href="/"><img class="minime" src="/theme/images/minime.png" alt="Mini Me" height="38" width="38" /> Howdy!</a> &nbsp;<i class="fa fa-arrow-right"></i>&nbsp;
    Sunday 19 July 2015</p>
</div>

<!-- article -->
<h1>Verify a PGP signature with GnuPG</h1>
<div id="article">
    <p>Using a <strong>PGP private/public keypair</strong> to create a <strong>digital signature</strong> for a file certifies its integrity. Adding a signature to software available for download heightens confidence that everything is OK!</p>
<div class="section" id="let-s-go">
<h2>Let's go!</h2>
<p>A developer signs a package with their private key and the receiver verifies the signature with the public key. If the package has been modified or corrupted in transmission the verification will fail.</p>
</div>
<div class="section" id="download">
<h2>0. Download</h2>
<p><strong>GnuPG</strong> is used to verify PGP signatures:</p>
<div class="highlight"><pre><span></span>$ sudo apt-get install gnupg
</pre></div>
<p><strong>Example:</strong> I download a <a class="reference external" href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/">Debian Jessie for Raspberry Pi 2</a> image and its signature:</p>
<div class="highlight"><pre><span></span>$ wget https://images.collabora.co.uk/rpi2/jessie-rpi2-20150705.img.gz
$ wget https://images.collabora.co.uk/rpi2/jessie-rpi2-20150705.img.gz.asc
</pre></div>
</div>
<div class="section" id="import">
<h2>1. Import</h2>
<div class="section" id="method-0">
<h3>Method 0</h3>
<p>If the location of the developer's public key is known, I can directly import the key into my keyring (<tt class="docutils literal"><span class="pre">~/.gnupg/pubring.gpg</span></tt>):</p>
<div class="highlight"><pre><span></span>$ gpg --keyserver x-hkp://pool.sks-keyservers.net --recv-keys 0xC2300F7B
</pre></div>
</div>
<div class="section" id="method-1">
<h3>Method 1</h3>
<p>Identify the public key used to generate the signature:</p>
<div class="highlight"><pre><span></span>$ gpg --verify jessie-rpi2-20150705.img.gz.asc
gpg: Signature made Sun <span class="m">05</span> Jul <span class="m">2015</span> 09:06:01 AM EDT using RSA key ID C2300F7B
gpg: Can<span class="err">&#39;</span>t check signature: public key not found
</pre></div>
<p>Public key is <tt class="docutils literal">0xC2300F7B</tt>. Run a key search <a class="footnote-reference" href="#id2" id="id1">[1]</a> and import:</p>
<div class="highlight"><pre><span></span>$ gpg --search 0xC2300F7B
gpg: keyring <span class="sb">`</span>/home/dwa/.gnupg/secring.gpg<span class="err">&#39;</span> created
gpg: searching <span class="k">for</span> <span class="s2">&quot;0xC2300F7B&quot;</span> from hkp server keys.gnupg.net
<span class="o">(</span>1<span class="o">)</span>     Sjoerd Simons &lt;sjoerd@luon.net&gt;
        Sjoerd Simons &lt;sjoerd@debian.org&gt;
        Antonius Gerardus Johannes Simons &lt;sjoerd@luon.net&gt;
            <span class="m">4096</span> bit RSA key C2300F7B, created: 2014-04-25
Keys 1-1 of <span class="m">1</span> <span class="k">for</span> <span class="s2">&quot;0xC2300F7B&quot;</span>.  Enter number<span class="o">(</span>s<span class="o">)</span>, N<span class="o">)</span>ext, or Q<span class="o">)</span>uit &gt; 1
gpg: requesting key C2300F7B from hkp server keys.gnupg.net
gpg: key C2300F7B: public key <span class="s2">&quot;Sjoerd Simons &lt;sjoerd@luon.net&gt;&quot;</span> imported
gpg: no ultimately trusted keys found
gpg: Total number processed: 1
gpg:               imported: <span class="m">1</span>  <span class="o">(</span>RSA: 1<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="verify">
<h2>2. Verify</h2>
<p>List keys in my keyring:</p>
<div class="highlight"><pre><span></span>$ gpg --list-keys
/home/dwa/.gnupg/pubring.gpg
----------------------------
pub   4096R/C2300F7B 2014-04-25
uid                  Sjoerd Simons &lt;sjoerd@luon.net&gt;
uid                  Sjoerd Simons &lt;sjoerd@debian.org&gt;
uid                  Antonius Gerardus Johannes Simons &lt;sjoerd@luon.net&gt;
sub   4096R/92545E8E 2014-04-25
</pre></div>
<p>Verify package signature:</p>
<div class="highlight"><pre><span></span>$ gpg --verify jessie-rpi2-20150705.img.gz.asc jessie-rpi2-20150705.img.gz
gpg: Signature made Sun <span class="m">05</span> Jul <span class="m">2015</span> 09:06:01 AM EDT using RSA key ID C2300F7B
gpg: Good signature from <span class="s2">&quot;Sjoerd Simons &lt;sjoerd@luon.net&gt;&quot;</span>
gpg:                 aka <span class="s2">&quot;Sjoerd Simons &lt;sjoerd@debian.org&gt;&quot;</span>
gpg:                 aka <span class="s2">&quot;Antonius Gerardus Johannes Simons &lt;sjoerd@luon.net&gt;&quot;</span>
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: <span class="m">2870</span> A31B EA9D BCF2 <span class="m">7472</span>  <span class="m">3108</span> C274 DB64 C230 0F7B
</pre></div>
<p>The warning about <strong>key is not certified with a trusted signature</strong> means GnuPG verified that key made that signature but can't guarantee that key really belongs to the developer. It's up to me to decide how much confidence to place in the authenticity of the key.</p>
<p>Happy hacking!</p>
<div class="section" id="notes">
<h3>Notes</h3>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Auto-generated <tt class="docutils literal"><span class="pre">~/.gnupg/gpg.conf</span></tt> defaults to searching <tt class="docutils literal">keyserver <span class="pre">hkp://keys.gnupg.net</span></tt> which redirects to the <a class="reference external" href="https://sks-keyservers.net/">SKS Keyservers pool</a>.</td></tr>
</tbody>
</table>
</div>
</div>

    <p class="articletags"><i class="fa fa-coffee"></i> More         &#8226; <a class="tag" href="http://www.circuidipity.com/tag-pgp.html">pgp</a>
        &#8226; <a class="tag" href="http://www.circuidipity.com/tag-crypto.html">crypto</a>
        &#8226; <a class="tag" href="http://www.circuidipity.com/tag-linux.html">linux</a>
</p>
</div>

<!-- Nav links to previous|next article -->
<div id="navmenu">
    <hr />
    <p class="prevpost"><i class="fa fa-arrow-left"></i> Older<br />
        <a href="http://www.circuidipity.com/i3-tiling-window-manager.html">Lightweight and a delight: i3 tiling window manager</a></p>
    <p class="nextpost">Newer <i class="fa fa-arrow-right"></i><br />
        <a href="http://www.circuidipity.com/resize-rootfs-raspberry-pi.html">Resize rootfs on Raspberry Pi</a></p>
</div>


        <!-- footer -->
<div id="footer">
    <img class="imgfooter" src="./theme/images/footerbar.png" />
    <p class="contentinfo">
    <span class="noWrap">
        Copyright &#169; 2017 and
        <a rel="license" class="ccLicense" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA License</a> by
        <a rel="author" class="authorID" href="/">Daniel Wayne Armstrong</a>
    </span>
    <span class="noWrap">
        <i class="fa fa-globe"></i>
        Find me at <span class="whoa">daniel at circuidipity dot com</span>
    </span>
    <br />
    Don't miss a thing... updates by
    <a href="feed.xml">RSS</a> and
    <a class="subTweat" href="https://twitter.com/circuidipity">Twitter</a>
    </p>
</div></body>
</html>