<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
        <title>Circuidipity | Install Debian Squeeze GNU/Linux</title>
        <meta http-equiv="content-type" content="text/html"; charset="utf-8" />
        <meta http-equiv="pragma" content="no-cache" />
        <meta name="author" content="Daniel Wayne Armstrong" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/main.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/pygment.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/css/font.css" type="text/css" media="all" />
        <link rel="stylesheet" href="http://www.circuidipity.com/theme/images/icons/font-awesome/css/font-awesome.min.css">
        <link rel="icon" href="http://www.circuidipity.com/theme/images/favicon.ico" type="image/x-icon" />
</head>

<body>
        <!-- content -->

<!-- breadcrumb trail -->
<div id="breadcrumb">
    <p><a href="/"><i class="fa fa-rocket"></i> Howdy!</a> &nbsp;<i class="fa fa-arrow-right"></i>&nbsp;
    <a href="archives.html">Archives</a> &nbsp;<i class="fa fa-arrow-right"></i>&nbsp;
    Thursday 03 June 2010</p>
</div>

<!-- article -->
<h1>Install Debian Squeeze GNU/Linux</h1>
<div id="article">
    <p>Happy news! On February 6, 2011 the word came down: &quot;After 24 months of constant development, the Debian Project is proud to present its new <a class="reference external" href="http://www.debian.org/News/2011/20110205a">stable version 6.0 'Squeeze'</a>&quot;.</p>
<p>Debian GNU/Linux is the one of the largest and longest-running all-volunteer free software projects in the world. One of the (many) things I like about Debian is how they balance the competing desires of <em>&quot;ooohhh... shiny!&quot;</em> vs <em>stability</em> in Linux by maintaining 3 different releases of the distribution: <tt class="docutils literal">stable/squeeze</tt>, <tt class="docutils literal">testing/wheezy</tt>, and <tt class="docutils literal">unstable/sid</tt>.</p>
<p>For a recent <a class="reference external" href="http://www.circuidipity.com/linux-home-server.html">home server setup</a> and laptop installation I chose <tt class="docutils literal">stable</tt>. Bleeding-edge packages are not required and these systems benefit from active security patches and bug fixes while avoiding any potentially disruptive changes in a very solid working environment.</p>
<p><tt class="docutils literal">Unstable</tt> is the staging ground for changes which - if no serious bugs are unearthed - migrate in short order to <tt class="docutils literal">testing</tt>. Which in turn is destined to be &quot;released when its ready&quot; and become the next version of <tt class="docutils literal">stable</tt>. It is even possible to use <a class="reference external" href="http://backports.debian.org/">backports</a> plus - lightly and with caution - <a class="reference external" href="http://www.debian.org/doc/manuals/debian-reference/ch02.en.html#_tweaking_candidate_version">apt-pinning</a> to pull packages from different releases and create the perfect mix (as tailored by you) of stability and freshness.</p>
<div class="section" id="step-0-start">
<h2>Step 0 - Start</h2>
<p>I like to start with a <em>lightweight minimal</em> installation of Debian.</p>
<p><a class="reference external" href="http://www.debian.org/distrib/">Download</a> one of the many versions of the Debian installation images. In this HOWTO example I select <tt class="docutils literal">i386</tt> as my target architecture and I use the small <tt class="docutils literal">businesscard.iso</tt>: <a class="reference external" href="http://cdimage.debian.org/debian-cd/current/i386/bt-cd/debian-6.0.3-i386-businesscard.iso.torrent">Torrent</a> | <a class="reference external" href="http://cdimage.debian.org/debian-cd/current/i386/iso-cd/debian-6.0.3-i386-businesscard.iso">Direct download</a></p>
<p>Download the <a class="reference external" href="http://cdimage.debian.org/debian-cd/current/i386/iso-cd/MD5SUMS">MD5SUMS</a> file and confirm the Debian <tt class="docutils literal">businesscard.iso</tt> is a &quot;good&quot; copy by running:</p>
<div class="highlight"><pre>$ md5sum debian-VERSION-i386-businesscard.iso<span class="p">;</span> cat MD5SUMS <span class="p">|</span> grep businesscard
</pre></div>
<p>Ensure the two strings of numbers match before proceeding.</p>
</div>
<div class="section" id="step-1-prepare-usb-stick">
<h2>Step 1 - Prepare USB stick</h2>
<p>USB sticks are my Linux install media of choice because I have configured several devices that do not include an optical drive. Plug the USB stick into your Linux host machine and leave the stick <strong>unmounted</strong>. Run the <tt class="docutils literal">dmesg</tt> command and note the USB device ID (<tt class="docutils literal">sdb</tt>, <tt class="docutils literal">sdc</tt>, ...).</p>
<p><span class="warning">WARNING!</span> Make sure to record the correct USB device ID. The following procedure <strong>wipes out all data on the USB stick.</strong> On my system the device shows up as <tt class="docutils literal">sdb</tt> but it will possibly be different on <strong>your</strong> system.</p>
<p>Copy the iso to the USB stick:</p>
<div class="highlight"><pre><span class="c1"># cat debian-VERSION-i386-businesscard.iso &gt; /dev/sdX</span>
<span class="c1"># sync</span>
</pre></div>
</div>
<div class="section" id="step-2-install">
<h2>Step 2 - Install</h2>
<div class="section" id="bios-and-the-debian-installer">
<h3>BIOS and the Debian installer</h3>
<p>Plug the freshly prepared USB stick into the target box. Power up. Either the device is pre-configured in the BIOS to recognize a USB stick as the first choice for boot or hit the device hotkey to enter the boot menu. Select the USB stick and launch the Debian installer.</p>
<div class="highlight"><pre>Advanced Options -&gt; Expert install
</pre></div>
<p>Mostly I stick with the default selections presented by the Debian installer .. with a few exceptions noted below.</p>
</div>
<div class="section" id="choose-a-mirror-of-the-debian-archive">
<h3>Choose a mirror of the Debian archive</h3>
<p>Debian's <tt class="docutils literal">businesscard</tt> installer allows a choice of Debian versions - <tt class="docutils literal">stable</tt>, <tt class="docutils literal">testing</tt>, or <tt class="docutils literal">unstable</tt>:</p>
<div class="highlight"><pre>Debian version to install:
squeeze - stable
</pre></div>
</div>
<div class="section" id="partition-disks">
<h3>Partition disks</h3>
<p>Creating encrypted partitions with <strong>Erase date: yes</strong> (default) overwrites the partition with random data and can take many hours depending on partition size.</p>
<p>Select the <tt class="docutils literal">Manual</tt> option to partition the drive. I choose to encrypt my <tt class="docutils literal">swap</tt> and <tt class="docutils literal">home</tt> partitions. Space permitting - my chosen partition layout is:</p>
<div class="highlight"><pre>sda1 - 20GB - root partition - filesystem: ext4, noatime
sda2 - 1GB - swap partition - filesystem: swap, Encryption key: Random key
sda3 - remaining space - home partition - filesystem: ext4, noatime, reserved blocks: 1%, Encryption key: Passphrase
</pre></div>
<p>Placing <tt class="docutils literal">root</tt> on a separate partition allows the flexibility of re-installing the operating system at a later date without overwriting <tt class="docutils literal">home</tt>.</p>
</div>
<div class="section" id="install-the-base-system">
<h3>Install the base system</h3>
<p>No need to include every driver under the sun. Just let the system load what is needed:</p>
<div class="highlight"><pre>Drivers to include in the initrd:
targeted: only include drivers needed <span class="k">for</span> this system
</pre></div>
</div>
<div class="section" id="configure-the-package-manager">
<h3>Configure the package manager</h3>
<p>I choose to enable the <tt class="docutils literal"><span class="pre">non-free</span></tt> archive (useful if you require non-free firmware for devices such as wireless chipsets):</p>
<div class="highlight"><pre>Use non-free software?
&lt;Yes&gt;
</pre></div>
</div>
<div class="section" id="software-selection">
<h3>Software selection</h3>
<p>A custom Debian machine starts as a <em>minimal</em> machine. <em>Un-select</em> all the software choices <em>except</em> for the standard system utilities:</p>
<div class="highlight"><pre>Choose software to install:
<span class="o">[</span>*<span class="o">]</span> Standard system utilities
</pre></div>
</div>
<div class="section" id="finish-installation">
<h3>Finish installation</h3>
<p>Finish setting up a lightweight base installation. Reboot ...</p>
</div>
</div>
<div class="section" id="step-3-configure">
<h2>Step 3 - Configure</h2>
<div class="section" id="fix-time-if-necessary">
<h3>Fix time (if necessary)</h3>
<div class="highlight"><pre>tzconfig    <span class="c1"># select timezone</span>
date MMDDHHmmCCYY    <span class="c1"># change the date and time to local settings</span>
hwclock --utc    <span class="c1"># set hardware clock to universal time</span>
hwclock --systohc    <span class="c1"># set system time to hardware clock</span>
</pre></div>
</div>
<div class="section" id="blacklist-modules">
<h3>Blacklist modules</h3>
<p>A system that makes use of encrypted hard drive partitions may notice the following error at boot - <tt class="docutils literal">modprobe: fatal: error inserting padlock_sha ... no such device</tt>.</p>
<p>It is harmless and the crypto-partitions mount as expected. But if you want to remove the error messages - and the affected system does not contain a VIA CPU - then <em>blacklist</em> the <tt class="docutils literal">padlock_aes</tt> and <tt class="docutils literal">padlock_sha</tt> modules by editing <tt class="docutils literal">/etc/modprobe.d/blacklist.conf</tt> (let's also get rid of that &quot;beep beep&quot; pcspeaker as a bonus):</p>
<div class="highlight"><pre><span class="c1"># no beep, thanks</span>
blacklist pcspkr

<span class="c1"># no VIA CPU no padlock needed foo</span>
blacklist padlock_aes
blacklist padlock_sha
</pre></div>
</div>
<div class="section" id="console-tools">
<h3>Console tools</h3>
<p>Install:</p>
<div class="highlight"><pre><span class="c1"># apt-get install anacron colordiff cowsay dosfstools firmware-linux gpm htop input-utils rsync sudo sysv-rc-conf vrms</span>
</pre></div>
</div>
<div class="section" id="sudo">
<h3>Sudo</h3>
<p>Allow a user to run commands with root-privileges using <tt class="docutils literal">sudo</tt>. Run the command <tt class="docutils literal">visudo <span class="pre">-s</span></tt> and configure:</p>
<div class="highlight"><pre><span class="c1"># Allow members of group sudo to execute any command</span>
%sudo   <span class="nv">ALL</span><span class="o">=(</span>ALL:ALL<span class="o">)</span> ALL

<span class="c1"># User privilege specification</span>
root    <span class="nv">ALL</span><span class="o">=(</span>ALL:ALL<span class="o">)</span> ALL
<span class="c1"># Allow user to run certain commands without prompting for a password</span>
yourusername     <span class="nv">ALL</span><span class="o">=</span>NOPASSWD: /sbin/cryptsetup, /sbin/halt, /sbin/ifconfig
</pre></div>
<p>Save changes and add your USERNAME to <tt class="docutils literal">sudo</tt> group:</p>
<div class="highlight"><pre><span class="c1"># adduser USERNAME sudo</span>
</pre></div>
</div>
<div class="section" id="wireless">
<h3>Wireless</h3>
<p>Wifi-equipped machines usually require additional firmware. My Thinkpad X201, for example, requires the <a class="reference external" href="http://packages.debian.org/squeeze/firmware-iwlwifi">firmware-iwlwifi</a> package:</p>
<div class="highlight"><pre>$ sudo apt-get install wireless-tools
$ sudo apt-get install firmware-PACKAGENAME
</pre></div>
<p>Run <tt class="docutils literal">ifconfig <span class="pre">-a</span></tt> and confirm the wireless_interface is detected (usually identified as <tt class="docutils literal">eth1</tt> or <tt class="docutils literal">wlan0</tt>). For manual setup of a wireless_interface (example: <tt class="docutils literal">wlan0</tt>) connecting to an access point with no encryption:</p>
<div class="highlight"><pre>$ ifconfig eth0 down
$ iwconfig
$ ifconfig wlan0 up
$ iwlist wlan0 scan <span class="p">|</span> less
$ iwconfig wlan0 essid <span class="s2">&quot;ACCESSPOINT&quot;</span>
$ iwconfig wlan0
$ dhclient wlan0
</pre></div>
</div>
<div class="section" id="id1">
<h3>Backports</h3>
<p><a class="reference external" href="http://backports.debian.org/">Backports.debian.org</a> contains packages from Debian's <tt class="docutils literal">testing</tt> and <tt class="docutils literal">unstable</tt> releases that have been recompiled for <tt class="docutils literal">stable</tt>.</p>
<p>Add the archive to the package manager by generating an entry in <tt class="docutils literal">/etc/apt/sources.list.d</tt>:</p>
<div class="highlight"><pre>$ sudo <span class="nb">echo</span> <span class="s1">&#39;deb http://backports.debian.org/debian-backports squeeze-backports main&#39;</span> &gt; /etc/apt/sources.list.d/squeeze-backports.list
$ sudo apt-get update
</pre></div>
<p>Files in <tt class="docutils literal">sources.list.d</tt> must end with a <tt class="docutils literal">*.list</tt> extension.</p>
<p>To verify which versions of a package are available and - for example - to install the version from backports:</p>
<div class="highlight"><pre>$ apt-cache policy PACKAGE
$ sudo apt-get -t squeeze-backports install PACKAGE
</pre></div>
</div>
<div class="section" id="multimedia">
<h3>Multimedia</h3>
<p>Add <a class="reference external" href="http://debian-multimedia.org/">marillat's debian-multimedia archive</a>. Download and install the archive encryption key:</p>
<div class="highlight"><pre>$ wget -c http://www.debian-multimedia.org/pool/main/d/debian-multimedia-keyring/debian-multimedia-keyring_2010.12.26_all.deb
$ sudo dpkg -i debian-multimedia-keyring_2010.12.26_all.deb
</pre></div>
<p>Generate an entry in <tt class="docutils literal">/etc/apt/sources.list.d</tt>:</p>
<div class="highlight"><pre>$ sudo <span class="nb">echo</span> <span class="s1">&#39;deb http://www.debian-multimedia.org/ squeeze main non-free&#39;</span> &gt; /etc/apt/sources.list.d/debian-multimedia.list
$ sudo apt-get update
</pre></div>
</div>
<div class="section" id="apt-file">
<h3>Apt-file</h3>
<p><tt class="docutils literal"><span class="pre">Apt-file</span></tt> is a useful Debian package search tool:</p>
<div class="highlight"><pre>$ sudo apt-get install apt-file
$ sudo apt-file update
</pre></div>
<p>Re-run <tt class="docutils literal"><span class="pre">apt-file</span> update</tt> whenever a new package archive is added to <tt class="docutils literal">sources.list</tt> or <tt class="docutils literal">sources.list.d</tt>.</p>
</div>
<div class="section" id="kernel">
<h3>Kernel</h3>
<p>If you are running Debian's <tt class="docutils literal">i386</tt> target architecture on a machine with 4GB+ of memory download the <tt class="docutils literal">pae kernel</tt> to make use of all that installed RAM:</p>
<div class="highlight"><pre>$ sudo apt-get remove linux-image-2.6-686
$ sudo apt-get -t squeeze-backports install linux-image-686-pae
</pre></div>
<p>... and reboot.</p>
</div>
<div class="section" id="sound">
<h3>Sound</h3>
<div class="highlight"><pre>$ aptitude show alsa-utils
$ alsamixer
$ aplay /usr/share/sounds/alsa/Front_Center.wav
$ alsactl store
</pre></div>
</div>
<div class="section" id="xorg">
<h3>Xorg</h3>
<p>Discover your machine's video card:</p>
<div class="highlight"><pre>$ lspci -v <span class="p">|</span> grep <span class="s2">&quot;VGA compatible controller&quot;</span>
</pre></div>
<p><em>Using an open-source video driver</em></p>
<div class="highlight"><pre>$ sudo apt-get install xorg
</pre></div>
<p>There are known issues with some Intel video cards - <tt class="docutils literal"><span class="pre">xserver-xorg-video-intel</span></tt> - and <a class="reference external" href="http://wiki.debian.org/KernelModesetting">KMS</a> and the default <tt class="docutils literal">2.6.32 kernel</tt> in Debian <tt class="docutils literal">stable</tt>.</p>
<p>On my Intel-equipped <a class="reference external" href="http://www.circuidipity.com/debian-linux-on-the-asus-eeepc-1001p.html">netbook</a> netbook booting from GRUB or starting an X session can result in a black screen. A temporary fix is to edit the booting GRUB entry and add <tt class="docutils literal">acpi=off</tt> to the kernel line.</p>
<p>A more permanent fix is to configure the <em>backlight</em> setting in <tt class="docutils literal">/etc/default/grub</tt>.</p>
<p><em>Using the proprietary Nvidia driver</em></p>
<p>See <a class="reference external" href="http://www.circuidipity.com/getting-nvidia-and-xorg-to-play-nice.html">Getting Nvidia and Xorg to play nice</a> ... though I think this information might be out-dated. I no longer use an NVIDIA-equipped machine.</p>
</div>
</div>
<div class="section" id="step-4-desktop">
<h2>Step 4 - Desktop</h2>
<p>Select a window manager or a full-blown desktop environment such as XFCE, GNOME or KDE. There are a <a class="reference external" href="http://www.gilesorr.com/wm/table.html">few to choose from</a> ...</p>
<p>I like <a class="reference external" href="http://www.xfce.org/">XFCE</a>. For a desktop environment complete with file manager, themes, graphical package and network managers:</p>
<div class="highlight"><pre>$ sudo apt-get install xfce4 gdm gksu libnotify-bin thunar ffmpegthumbnailer catfish synaptic update-notifier xscreensaver
$ sudo apt-get install gtk2-engines gtk2-engines-murrine gnome-colors shiki-colors qt4-qtconfig
$ sudo apt-get install ttf-mscorefonts-installer ttf-bitstream-vera ttf-liberation xfonts-terminus
$ sudo apt-get install network-manager network-manager-gnome
</pre></div>
<div class="section" id="applications">
<h3>Applications</h3>
<p>My <a class="reference external" href="http://www.circuidipity.com/applications-checklist-for-my-debian-linux-installs.html">applications checklist</a>.</p>
</div>
</div>

    <p class="articletags"><i class="fa fa-coffee"></i> More         &#8226; <a class="tag" href="http://www.circuidipity.com/tag-debian.html">debian</a>
        &#8226; <a class="tag" href="http://www.circuidipity.com/tag-linux.html">linux</a>
</p>
</div>

<!-- Nav links to previous|next article -->
<div id="navmenu">
    <hr />
    <p class="prevpost"><i class="fa fa-arrow-left"></i> Older<br />
        <a href="http://www.circuidipity.com/hello-world.html">Hello World</a></p>
    <p class="nextpost">Newer <i class="fa fa-arrow-right"></i><br />
        <a href="http://www.circuidipity.com/applications-checklist-for-my-debian-linux-installs.html">Applications checklist for my Debian Squeeze installs</a></p>
</div>


        <!-- footer -->
<div id="footer">
    <img class="imgfooter" src="./theme/images/footerbar.png" />
    <p class="contentinfo">
    <span class="noWrap">
        Copyright &#169; 2016 and
        <a rel="license" class="ccLicense" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA License</a> by
        <a rel="author" class="authorID" href="/">Daniel Wayne Armstrong</a>
    </span>
    <span class="noWrap">
        <i class="fa fa-globe"></i>
        Find me at <span class="whoa">daniel at circuidipity dot com</span>
    </span>
    <br />
    Don't miss a thing... updates by
    <a href="feed.xml">RSS</a> and
    <a class="subTweat" href="https://twitter.com/circuidipity">Twitter</a>
    </p>
</div></body>
</html>